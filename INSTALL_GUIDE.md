# üöÄ –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π Pyland –Ω–∞ VDS

## üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **–°–µ—Ä–≤–µ—Ä**: 78.40.219.145
- **–î–æ–º–µ–Ω**: pylandschool.com
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**: https://github.com/ps965xx7vn-lgtm/backend.git
- **–ü—É—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏**: /opt/pyland
- **–ü—Ä–æ—Ç–æ–∫–æ–ª**: HTTPS (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

## ‚ö° 3 –ø—Ä–æ—Å—Ç—ã—Ö —à–∞–≥–∞

### –®–∞–≥ 0: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)

‚ö†Ô∏è **–ü–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∑–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏ –∑–∞–ø—É—à—å—Ç–µ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è!**

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ (–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ)
cd /path/to/backend
./nginx/scripts/prepare_deploy.sh

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
git add .
git commit -m "Deploy configuration for pylandschool.com"
git push origin main  # –∏–ª–∏ dev –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS (5-15 –º–∏–Ω—É—Ç)

–î–æ–±–∞–≤—å—Ç–µ –≤ –ø–∞–Ω–µ–ª–∏ –≤–∞—à–µ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:

```
–¢–∏–ø: A
–ò–º—è: @
–ó–Ω–∞—á–µ–Ω–∏–µ: 78.40.219.145
TTL: 3600

–¢–∏–ø: A
–ò–º—è: www
–ó–Ω–∞—á–µ–Ω–∏–µ: 78.40.219.145
TTL: 3600
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π:
```bash
dig pylandschool.com +short
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: 78.40.219.145
```

### –®–∞–≥ 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@78.40.219.145

# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–≤–µ—Ç–∫–∞ main –¥–ª—è production)
mkdir -p /opt/pyland
cd /opt/pyland
git clone -b main https://github.com/ps965xx7vn-lgtm/backend.git

# –ò–ª–∏ dev –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
# git clone -b dev https://github.com/ps965xx7vn-lgtm/backend.git

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É
cd backend/nginx/scripts
chmod +x *.sh
sudo ./install.sh

# –ò–ª–∏ —É–∫–∞–∑–∞—Ç—å –≤–µ—Ç–∫—É —è–≤–Ω–æ:
# GIT_BRANCH=dev sudo ./install.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (Python 3.13, PostgreSQL, Redis, Nginx)
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç Python –ø–∞–∫–µ—Ç—ã —á–µ—Ä–µ–∑ Poetry
- ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ –°–æ–±–µ—Ä–µ—Ç —Å—Ç–∞—Ç–∏–∫—É
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç systemd —Å–µ—Ä–≤–∏—Å—ã
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç Gunicorn, Celery –∏ Nginx

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ SSL

```bash
# 1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env (–ø–∞—Ä–æ–ª–∏, —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏)
nano /opt/pyland/backend/.env

# 2. –°–æ–∑–¥–∞–π—Ç–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
sudo -u pyland /opt/pyland/.venv/bin/python /opt/pyland/backend/src/manage.py createsuperuser

# 3. –ü–æ–ª—É—á–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)
sudo certbot --nginx -d pylandschool.com -d www.pylandschool.com

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Nginx
sudo systemctl restart nginx

# 5. –ì–æ—Ç–æ–≤–æ! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ
curl -I https://pylandschool.com
```

## üéØ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
sudo systemctl status pyland-gunicorn
sudo systemctl status pyland-celery-worker
sudo systemctl status pyland-celery-beat
sudo systemctl status nginx

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç
cd /opt/pyland/backend/nginx/scripts
sudo ./manage_services.sh status
```

## üîÑ –î–µ–ø–ª–æ–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

```bash
ssh root@78.40.219.145
cd /opt/pyland/backend/nginx/scripts
sudo ./deploy.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- `git pull` –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –û–±–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ü—Ä–∏–º–µ–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
- –°–æ–±–µ—Ä–µ—Ç —Å—Ç–∞—Ç–∏–∫—É
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–∏—Å—ã

## üíæ –ë–µ–∫–∞–ø—ã

```bash
# –°–æ–∑–¥–∞—Ç—å –±–µ–∫–∞–ø
cd /opt/pyland/backend/nginx/scripts
sudo ./backup.sh

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±–µ–∫–∞–ø—ã (–¥–æ–±–∞–≤–∏—Ç—å –≤ crontab)
sudo crontab -e
# –î–æ–±–∞–≤–∏—Ç—å: 0 3 * * * /opt/pyland/backend/nginx/scripts/backup.sh
```

## üìä –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
sudo tail -f /opt/pyland/backend/logs/gunicorn-error.log
sudo tail -f /opt/pyland/backend/logs/celery-worker.log

# –õ–æ–≥–∏ nginx
sudo tail -f /var/log/nginx/pyland_error.log

# –õ–æ–≥–∏ systemd
sudo journalctl -u pyland-gunicorn -f

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
cd /opt/pyland/backend/nginx/scripts
sudo ./manage_services.sh restart
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **DNS –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞** - –±–µ–∑ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö DNS –∑–∞–ø–∏—Å–µ–π SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è
2. **–°–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ HTTPS** - –¥–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ SSL –±—É–¥–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
3. **–í—Å–µ –ø–∞—Ä–æ–ª–∏ –≤ .env** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏—Ç–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
4. **Firewall** - —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ—Ä—Ç—ã 80 –∏ 443 –æ—Ç–∫—Ä—ã—Ç—ã
5. **Git credentials** - –µ—Å–ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ SSH –∫–ª—é—á–∏

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### DNS –Ω–µ —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è
```bash
# –û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–Ω–æ–≤–∞
dig pylandschool.com +short @8.8.8.8
# –ü–æ–¥–æ–∂–¥–∏—Ç–µ 15-30 –º–∏–Ω—É—Ç –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è
```

### Gunicorn –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
sudo journalctl -u pyland-gunicorn -n 50
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env
cat /opt/pyland/backend/.env
```

### 502 Bad Gateway
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ socket
ls -la /opt/pyland/gunicorn.sock
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞
sudo chown -R pyland:www-data /opt/pyland
```

### Certbot –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS
dig pylandschool.com +short
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Nginx
sudo nginx -t
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall
sudo ufw status
sudo ufw allow 'Nginx Full'
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [nginx/README.md](nginx/README.md) - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [nginx/DNS_SETUP.md](nginx/DNS_SETUP.md) - –î–µ—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ DNS
- [nginx/QUICKSTART.md](nginx/QUICKSTART.md) - –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. DNS –∑–∞–ø–∏—Å–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
2. –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã (`systemctl status`)
3. Firewall –æ—Ç–∫—Ä—ã—Ç –¥–ª—è 80/443 –ø–æ—Ä—Ç–æ–≤
4. .env —Ñ–∞–π–ª –∑–∞–ø–æ–ª–Ω–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
5. SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ø–æ–ª—É—á–µ–Ω

---

**–ì–æ—Ç–æ–≤–æ!** üéâ –í–∞—à Pyland –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: https://pylandschool.com
