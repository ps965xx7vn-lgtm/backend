# Certificates Application

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã Pyland School.

## –û–ø–∏—Å–∞–Ω–∏–µ

Certificates –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∫—É—Ä—Å–æ–≤ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏.

## –°—Ç–∞—Ç—É—Å

üöß **–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞, —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è.

## –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏

### Certificate
–û—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞:
- **student** - —Å—Ç—É–¥–µ–Ω—Ç, –ø–æ–ª—É—á–∏–≤—à–∏–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- **course** - –∫—É—Ä—Å, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã–¥–∞–Ω —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- **completion_date** - –¥–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫—É—Ä—Å–∞
- **certificate_number** - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
- **verification_code** - –∫–æ–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏
- **pdf_file** - —Å—Å—ã–ª–∫–∞ –Ω–∞ PDF —Ñ–∞–π–ª
- **issued_at** - –¥–∞—Ç–∞ –≤—ã–¥–∞—á–∏
- **is_valid** - —Å—Ç–∞—Ç—É—Å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### CertificateTemplate
–®–∞–±–ª–æ–Ω—ã —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤:
- **name** - –Ω–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
- **course** - –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –∫—É—Ä—Å—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **template_file** - HTML/PDF —à–∞–±–ª–æ–Ω
- **variables** - –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (JSON)
- **is_default** - —à–∞–±–ª–æ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

## –¢—Ä–∏–≥–≥–µ—Ä –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞:
```python
student.course_progress >= 100%
AND
all_required_lessons_completed = True
```

## API Endpoints (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

### –î–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
```
GET    /api/certificates/              - –ú–æ–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
GET    /api/certificates/{id}          - –î–µ—Ç–∞–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
GET    /api/certificates/{id}/download - –°–∫–∞—á–∞—Ç—å PDF
GET    /api/certificates/{id}/share    - –°—Å—ã–ª–∫–∞ –¥–ª—è —à–∞—Ä–∏–Ω–≥–∞
```

### –ü—É–±–ª–∏—á–Ω—ã–µ
```
GET    /api/certificates/verify/{number}  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å
GET    /api/certificates/public/{code}    - –ü—É–±–ª–∏—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
```

### –î–ª—è admin
```
POST   /api/certificates/generate         - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é
POST   /api/certificates/{id}/revoke      - –ê–Ω–Ω—É–ª–∏—Ä–æ–≤–∞—Ç—å
POST   /api/certificates/{id}/regenerate  - –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å
```

## Views (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

### –î–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
- `certificates_list` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- `certificate_detail` - –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∫–Ω–æ–ø–∫–æ–π —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
- `certificate_download` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ PDF

### –ü—É–±–ª–∏—á–Ω—ã–µ
- `certificate_verify` - —Ñ–æ—Ä–º–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ –Ω–æ–º–µ—Ä—É
- `certificate_public` - –ø—É–±–ª–∏—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

## –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF

### –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞
```python
from weasyprint import HTML
# –∏–ª–∏
from reportlab.pdfgen import canvas
```

### –ü—Ä–æ—Ü–µ—Å—Å
1. –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ HTML —à–∞–±–ª–æ–Ω–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞
2. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è HTML ‚Üí PDF
3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ QR-–∫–æ–¥–∞ –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ media/certificates/
5. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –ë–î

### –®–∞–±–ª–æ–Ω
```html
<div class="certificate">
    <h1>–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ –∫—É—Ä—Å–∞</h1>
    <p>–ù–∞—Å—Ç–æ—è—â–∏–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è, —á—Ç–æ</p>
    <h2>{{ student.full_name }}</h2>
    <p>—É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–∏–ª(–∞) –∫—É—Ä—Å</p>
    <h3>{{ course.name }}</h3>
    <p>–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: {{ completion_date }}</p>
    <p>‚Ññ {{ certificate_number }}</p>
    <img src="{{ qr_code }}" alt="QR Code">
</div>
```

## –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä

–§–æ—Ä–º–∞—Ç: `PYLAND-{YEAR}-{COURSE_CODE}-{NUMBER}`

–ü—Ä–∏–º–µ—Ä: `PYLAND-2025-PY101-00123`

```python
def generate_certificate_number(course, student):
    year = datetime.now().year
    course_code = course.code.upper()
    count = Certificate.objects.filter(course=course).count() + 1
    return f"PYLAND-{year}-{course_code}-{count:05d}"
```

## –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è

### QR Code
–°–æ–¥–µ—Ä–∂–∏—Ç URL –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
```
https://pyland.school/certificates/verify/{verification_code}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∫–∞–Ω–∏—Ä—É–µ—Ç QR –∏–ª–∏ –≤–≤–æ–¥–∏—Ç –Ω–æ–º–µ—Ä
2. –°–∏—Å—Ç–µ–º–∞ –∏—â–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤ –ë–î
3. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:
   - ‚úÖ –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª–∏
   - ‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
   - ‚ö†Ô∏è –ê–Ω–Ω—É–ª–∏—Ä–æ–≤–∞–Ω - –ø—Ä–∏—á–∏–Ω–∞

## –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏

### –¶–∏—Ñ—Ä–æ–≤–∞—è –ø–æ–¥–ø–∏—Å—å
```python
import hashlib

def generate_verification_code(certificate):
    data = f"{certificate.student_id}{certificate.course_id}{certificate.issued_at}"
    return hashlib.sha256(data.encode()).hexdigest()[:16]
```

### Watermark
- –õ–æ–≥–æ—Ç–∏–ø —à–∫–æ–ª—ã
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä
- QR-–∫–æ–¥
- –ü–æ–¥–ø–∏—Å—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)

## Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

–ü—Ä–∏ –≤—ã–¥–∞—á–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞:
```python
send_mail(
    subject='–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø–æ–ª—É—á–∏–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç!',
    message=f'–í–∞—à —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ø–æ –∫—É—Ä—Å—É {course.name} –≥–æ—Ç–æ–≤',
    from_email='noreply@pyland.school',
    recipient_list=[student.email],
    html_message=render_to_string('emails/certificate_issued.html', {...})
)
```

## Admin –ø–∞–Ω–µ–ª—å

–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- –§–∏–ª—å—Ç—Ä—ã –ø–æ –∫—É—Ä—Å—É, –¥–∞—Ç–µ, —Å—Ç—É–¥–µ–Ω—Ç—É
- –†—É—á–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- –ê–Ω–Ω—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å –ø—Ä–∏—á–∏–Ω–æ–π)
- –ú–∞—Å—Å–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- –≠–∫—Å–ø–æ—Ä—Ç —Å–ø–∏—Å–∫–∞ –≤ CSV

## –•—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

```python
# settings.py
MEDIA_ROOT = BASE_DIR / 'media'
CERTIFICATES_DIR = MEDIA_ROOT / 'certificates'

# models.py
def certificate_upload_path(instance, filename):
    return f'certificates/{instance.student.id}/{instance.certificate_number}.pdf'
```

## –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

### –ú–µ—Ç—Ä–∏–∫–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–¥–∞–Ω–Ω—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- –ö–æ–Ω–≤–µ—Ä—Å–∏—è —Å—Ç—É–¥–µ–Ω—Ç ‚Üí —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫—É—Ä—Å—ã –ø–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º
- –°—Ä–µ–¥–Ω–∏–π —Å—Ä–æ–∫ –ø–æ–ª—É—á–µ–Ω–∏—è

### –ë–µ–π–¥–∂–∏
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LinkedIn, Credly –¥–ª—è —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –±–µ–π–¥–∂–µ–π

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

- **courses** - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∫—É—Ä—Å–∞ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é
- **students** - —Å—Ç—É–¥–µ–Ω—Ç-–ø–æ–ª—É—á–∞—Ç–µ–ª—å
- **notifications** - email –æ –≤—ã–¥–∞—á–µ
- **payments** - —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö –∫—É—Ä—Å–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏

–í `settings.py`:
```python
# Certificate settings
CERTIFICATE_TEMPLATE_DIR = BASE_DIR / 'templates/certificates'
CERTIFICATE_LOGO = STATIC_ROOT / 'images/logo-certificate.png'
CERTIFICATE_SIGNATURE = STATIC_ROOT / 'images/signature.png'

# QR Code settings
QR_CODE_SIZE = 150
QR_CODE_BORDER = 4
```

## –ê–≤—Ç–æ—Ä—ã

Pyland Team, 2025
