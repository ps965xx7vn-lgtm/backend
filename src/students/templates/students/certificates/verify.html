{% extends 'base.html' %}
{% load i18n static %}

{% block title %}{% trans "–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞" %} - Pyland{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/students/certificates-verify.css' %}">
{% endblock %}

{% block content %}
<div class="verify-page">
    <div class="container">
        <div class="verify-container">
            <div class="verify-card">
                <div class="verify-header">
                    <div class="verify-icon">üîç</div>
                    <h1>{% trans "–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞" %}</h1>
                    <p>{% trans "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ Pyland" %}</p>
                </div>

                <div class="verify-body">
                    {% if not certificate %}
                    <form method="get" action="{% url 'certificates:verify' %}" class="search-form">
                        <div class="form-group">
                            <label for="query" class="form-label">
                                {% trans "–ù–æ–º–µ—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –∏–ª–∏ –∫–æ–¥ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏" %}
                            </label>
                            <input
                                type="text"
                                name="query"
                                id="query"
                                class="form-control"
                                placeholder="{% trans '–ù–∞–ø—Ä–∏–º–µ—Ä: CERT-20260126-0001 –∏–ª–∏ ABC123XYZ' %}"
                                value="{{ query }}"
                                required
                            >
                        </div>
                        <button type="submit" class="btn-verify">
                            üîé {% trans "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç" %}
                        </button>
                    </form>

                    {% if query %}
                    <div class="result-section result-invalid">
                        <div class="result-icon">‚ùå</div>
                        <div class="result-title">{% trans "–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω" %}</div>
                        <p class="result-not-found-text">
                            {% trans "–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –Ω–æ–º–µ—Ä–æ–º –∏–ª–∏ –∫–æ–¥–æ–º –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –Ω–∞—à–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –≤–≤–µ–¥–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö." %}
                        </p>
                    </div>
                    {% endif %}
                    {% endif %}

                    {% if certificate %}
                    <div class="result-section {% if certificate.is_valid %}result-valid{% else %}result-invalid{% endif %}">
                        <div class="result-icon">
                            {% if certificate.is_valid %}‚úÖ{% else %}‚ö†Ô∏è{% endif %}
                        </div>
                        <div class="result-title">
                            {% if certificate.is_valid %}
                                {% trans "–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ø–æ–¥–ª–∏–Ω–Ω—ã–π –∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω" %}
                            {% else %}
                                {% trans "–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –æ—Ç–æ–∑–≤–∞–Ω" %}
                            {% endif %}
                        </div>

                        <div class="certificate-info">
                            <div class="info-row">
                                <span class="info-label">üìú {% trans "–ù–æ–º–µ—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞:" %}</span>
                                <span class="info-value">{{ certificate.certificate_number }}</span>
                            </div>

                            <div class="info-row">
                                <span class="info-label">üîê {% trans "–ö–æ–¥ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏:" %}</span>
                                <span class="info-value">{{ certificate.verification_code }}</span>
                            </div>

                            <div class="info-row">
                                <span class="info-label">üë§ {% trans "–°—Ç—É–¥–µ–Ω—Ç:" %}</span>
                                <span class="info-value">
                                    {{ certificate.student.user.get_full_name|default:certificate.student.user.email }}
                                </span>
                            </div>

                            <div class="info-row">
                                <span class="info-label">üìö {% trans "–ö—É—Ä—Å:" %}</span>
                                <span class="info-value">{{ certificate.course.title }}</span>
                            </div>

                            <div class="info-row">
                                <span class="info-label">üìÖ {% trans "–î–∞—Ç–∞ –≤—ã–¥–∞—á–∏:" %}</span>
                                <span class="info-value">{{ certificate.completion_date|date:"d.m.Y" }}</span>
                            </div>

                            <div class="info-row">
                                <span class="info-label">üìñ {% trans "–£—Ä–æ–∫–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–æ:" %}</span>
                                <span class="info-value">{{ certificate.lessons_completed }} / {{ certificate.total_lessons }}</span>
                            </div>

                            <div class="info-row">
                                <span class="info-label">‚úÖ {% trans "–ó–∞–¥–∞–Ω–∏–π –æ–¥–æ–±—Ä–µ–Ω–æ:" %}</span>
                                <span class="info-value">{{ certificate.assignments_approved }}</span>
                            </div>

                            {% if certificate.final_grade %}
                            <div class="info-row">
                                <span class="info-label">üéØ {% trans "–ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞:" %}</span>
                                <span class="info-value">{{ certificate.final_grade }}%</span>
                            </div>
                            {% endif %}

                            {% if not certificate.is_valid and certificate.revoke_reason %}
                            <div class="info-row info-row-revoke-reason">
                                <span class="info-label info-label-revoke">
                                    ‚ö†Ô∏è {% trans "–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∑—ã–≤–∞:" %}
                                </span>
                                <span class="info-value info-value-revoke">
                                    {{ certificate.revoke_reason }}
                                </span>
                            </div>
                            {% endif %}
                        </div>

                        {% if certificate.is_valid %}
                        <p class="valid-certificate-footer">
                            ‚úì {% trans "–≠—Ç–æ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –±—ã–ª –≤—ã–¥–∞–Ω –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π Pyland –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —É—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∫—É—Ä—Å–∞." %}
                        </p>
                        {% endif %}
                    </div>
                    {% endif %}

                    <div class="help-text">
                        <p><strong>{% trans "–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?" %}</strong></p>
                        <p>{% trans "–ö–∞–∂–¥—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç Pyland –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –∏ –∫–æ–¥ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏. –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–π –∏–∑ –Ω–∏—Ö –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏." %}</p>
                        <p class="help-text-muted">
                            {% trans "–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞—à–µ–π" %}
                            <a href="{% url 'support:create_ticket' %}">{% trans "—Å–ª—É–∂–±–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏" %}</a>.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/students/dashboard.js' %}"></script>
<script src="{% static 'js/students/dashboard-mobile.js' %}"></script>
<script src="{% static 'js/students/code-copy.js' %}"></script>
{% endblock %}
