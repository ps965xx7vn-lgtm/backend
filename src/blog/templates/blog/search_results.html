{% extends 'base.html' %}
{% load static %}
{% load i18n %}
{% load markdown_filters %}

{% block title %}{% trans "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞" %} - {% trans "–ë–ª–æ–≥ PyLand" %}{% endblock %}
{% block description %}{% trans "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –≤ –±–ª–æ–≥–µ PyLand" %}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/courses/courses.css' %}">
<link rel="stylesheet" href="{% static 'css/blog/utils.css' %}">
<link rel="stylesheet" href="{% static 'css/blog/search-results.css' %}">
{% endblock %}

{% block content %}
<!-- Revolutionary Search Hero -->
<section class="revolutionary-hero-home">
    <div class="hero-particles">
        <div class="particle particle-1"></div>
        <div class="particle particle-2"></div>
        <div class="particle particle-3"></div>
        <div class="particle particle-4"></div>
        <div class="particle particle-5"></div>
    </div>
    
    <div class="container">
        <div class="hero-content-revolutionary">
            <div class="hero-category-revolutionary animate-fade-in">
                <span>üîç</span>
                <span>{% trans "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞" %}</span>
            </div>
            
            <h1 class="hero-title-revolutionary animate-fade-in delay-1">
                {% if query %}
                    {% trans "–ü–æ–∏—Å–∫:" %} "{{ query }}"
                {% else %}
                    {% trans "–ü–æ–∏—Å–∫ –ø–æ –±–ª–æ–≥—É" %}
                {% endif %}
            </h1>
            
            <p class="hero-subtitle-revolutionary animate-fade-in delay-2">
                {% if articles %}
                    {% trans "–ù–∞–π–¥–µ–Ω–æ" %} {{ articles.paginator.count }} {% trans "—Å—Ç–∞—Ç–µ–π –ø–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É" %}
                {% else %}
                    {% trans "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –ø–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ" %}
                {% endif %}
            </p>
            
            <div class="hero-stats-revolutionary animate-fade-in delay-3">
                <div class="stat-item-hero">
                    <span class="stat-icon">üìä</span>
                    <span class="stat-text">{{ articles.paginator.count|default:"0" }} {% trans "—Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤" %}</span>
                </div>
                <div class="stat-item-hero">
                    <span class="stat-icon">‚ö°</span>
                    <span class="stat-text">{% trans "–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫" %}</span>
                </div>
                <div class="stat-item-hero">
                    <span class="stat-icon">üéØ</span>
                    <span class="stat-text">{% trans "–¢–æ—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è" %}</span>
                </div>
            </div>
            
            <div class="hero-actions-revolutionary animate-fade-in delay-4">
                <a href="#results" class="btn-revolutionary-hero btn-primary-hero">
                    <span>üìã</span>
                    <span>{% trans "–°–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã" %}</span>
                </a>
                <a href="{% url 'blog:article_list' %}" class="btn-revolutionary-hero btn-secondary-hero">
                    <span>üìö</span>
                    <span>{% trans "–í—Å–µ —Å—Ç–∞—Ç—å–∏" %}</span>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Search Form -->
<section class="courses-revolutionary" id="results" data-search-query="{{ query|escapejs }}">
    <div class="container">
        <div class="section-header-revolutionary">
            <div class="section-badge animate-fade-in">
                <span>üîç</span>
                <span>{% trans "–ü–æ–∏—Å–∫" %}</span>
            </div>
            <h2 class="section-title-revolutionary animate-fade-in delay-1">
                {% trans "–£—Ç–æ—á–Ω–∏—Ç—å –ø–æ–∏—Å–∫" %}
            </h2>
            <p class="section-subtitle-revolutionary animate-fade-in delay-2">
                {% trans "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–∏–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–ª–∏ —Ñ—Ä–∞–∑—ã" %}
            </p>
        </div>
        
        <div class="search-box-revolutionary animate-fade-in delay-1">
            <form method="get" action="{% url 'blog:article_search' %}">
                <input type="text" name="q" value="{{ query }}" placeholder="{% trans '–ü–æ–∏—Å–∫ —Å—Ç–∞—Ç–µ–π...' %}" class="search-input-revolutionary" autofocus>
                <button type="submit" class="search-btn-revolutionary">
                    <span>üîç</span>
                </button>
            </form>
        </div>
    </div>
</section>

<!-- Search Results -->
{% if articles %}
<section class="courses-revolutionary">
    <div class="container">
        <div class="section-header-revolutionary">
            <div class="section-badge animate-fade-in">
                <span>üìù</span>
                <span>{% trans "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã" %}</span>
            </div>
            <h2 class="section-title-revolutionary animate-fade-in delay-1">
                {% trans "–ù–∞–π–¥–µ–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏" %}
            </h2>
            <p class="section-subtitle-revolutionary animate-fade-in delay-2">
                {% trans "–°—Ç–∞—Ç—å–∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É" %} "{{ query }}"
            </p>
        </div>
        
        <div class="courses-filter-revolutionary animate-fade-in delay-1">
            <a href="?q={{ query }}&sort=-published_at" class="filter-btn {% if request.GET.sort == '-published_at' or not request.GET.sort %}active{% endif %}">
                üïí {% trans "–ù–æ–≤—ã–µ" %}
            </a>
            <a href="?q={{ query }}&sort=published_at" class="filter-btn {% if request.GET.sort == 'published_at' %}active{% endif %}">
                üìÖ {% trans "–°—Ç–∞—Ä—ã–µ" %}
            </a>
            <a href="?q={{ query }}&sort=title" class="filter-btn {% if request.GET.sort == 'title' %}active{% endif %}">
                üî§ {% trans "–ü–æ –∞–ª—Ñ–∞–≤–∏—Ç—É" %}
            </a>
            <a href="?q={{ query }}&sort=-views_count" class="filter-btn {% if request.GET.sort == '-views_count' %}active{% endif %}">
                üëÅÔ∏è {% trans "–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ" %}
            </a>
        </div>
        
        <div class="courses-grid-revolutionary">
            {% for article in articles %}
            <a href="{{ article.get_absolute_url }}" class="course-card-revolutionary animate-fade-in delay-{{ forloop.counter|add:2 }}" class="link-plain">
                <div class="course-image-revolutionary">
                    {% if article.featured_image %}
                        <img src="{{ article.featured_image.url }}" alt="{{ article.title }}" class="img-cover">
                    {% else %}
                        <div class="article-placeholder">
                            {{ article.category.icon|default:"üîç" }}
                        </div>
                    {% endif %}
                    <div class="course-badge-revolutionary">
                        {% if article.difficulty == 'beginner' %}üü¢ {% trans "–õ–µ–≥–∫–æ" %}
                        {% elif article.difficulty == 'intermediate' %}üü° {% trans "–°—Ä–µ–¥–Ω–µ" %}
                        {% elif article.difficulty == 'advanced' %}üî¥ {% trans "–°–ª–æ–∂–Ω–æ" %}
                        {% else %}üîç {% trans "–ù–∞–π–¥–µ–Ω–æ" %}
                        {% endif %}
                    </div>
                </div>
                <div class="course-content-revolutionary">
                    <h3 class="course-title-revolutionary">{{ article.title }}</h3>
                                        <p class="course-description-revolutionary">
                        {{ article.excerpt|default:article.content|smart_excerpt:20 }}
                    </p>
                    <div class="course-meta-revolutionary">
                        <div class="course-duration-revolutionary">
                            {{ article.category.icon|default:"üìÇ" }} {{ article.category.name|default:"–û–±—â–µ–µ" }}
                        </div>
                        <div class="course-lessons-revolutionary">
                            üìÖ {{ article.published_at|date:"d.m.Y" }}
                        </div>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>
        
        <!-- Pagination -->
        {% if page_obj.has_other_pages %}
        <div class="pagination-revolutionary animate-fade-in delay-5">
            {% if page_obj.has_previous %}
                <a href="?q={{ query }}&page=1{% if request.GET.sort %}&sort={{ request.GET.sort }}{% endif %}" class="pagination-btn pagination-first">
                    <span>‚èÆÔ∏è</span>
                </a>
                <a href="?q={{ query }}&page={{ page_obj.previous_page_number }}{% if request.GET.sort %}&sort={{ request.GET.sort }}{% endif %}" class="pagination-btn pagination-prev">
                    <span>‚óÄÔ∏è</span>
                </a>
            {% endif %}
            
            <span class="pagination-info">
                {% trans "–°—Ç—Ä–∞–Ω–∏—Ü–∞" %} {{ page_obj.number }} {% trans "–∏–∑" %} {{ page_obj.paginator.num_pages }}
            </span>
            
            {% if page_obj.has_next %}
                <a href="?q={{ query }}&page={{ page_obj.next_page_number }}{% if request.GET.sort %}&sort={{ request.GET.sort }}{% endif %}" class="pagination-btn pagination-next">
                    <span>‚ñ∂Ô∏è</span>
                </a>
                <a href="?q={{ query }}&page={{ page_obj.paginator.num_pages }}{% if request.GET.sort %}&sort={{ request.GET.sort }}{% endif %}" class="pagination-btn pagination-last">
                    <span>‚è≠Ô∏è</span>
                </a>
            {% endif %}
        </div>
        {% endif %}
    </div>
</section>
{% else %}
<!-- No Results -->
<section class="courses-revolutionary">
    <div class="container">
        <div class="empty-state-revolutionary">
            <div class="empty-icon">üîç</div>
            <h3>{% trans "–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ" %}</h3>
            <p>{% trans "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–∏—Å–∫–æ–≤–æ–π –∑–∞–ø—Ä–æ—Å –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞." %}</p>
            <div class="mt-32">
                <a href="{% url 'blog:article_list' %}" class="btn-revolutionary-hero btn-primary-hero">
                    <span>üìö</span>
                    <span>{% trans "–í—Å–µ —Å—Ç–∞—Ç—å–∏" %}</span>
                </a>
            </div>
        </div>
    </div>
</section>
{% endif %}

<!-- Search Suggestions -->
<section class="features-revolutionary">
    <div class="container">
        <div class="section-header-revolutionary">
            <div class="section-badge animate-fade-in">
                <span>üî•</span>
                <span>{% trans "–ü–æ–ø—É–ª—è—Ä–Ω–æ–µ" %}</span>
            </div>
            <h2 class="section-title-revolutionary animate-fade-in delay-1">
                {% trans "–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–µ–º—ã" %}
            </h2>
            <p class="section-subtitle-revolutionary animate-fade-in delay-2">
                {% trans "–í–æ–∑–º–æ–∂–Ω–æ, –≤–∞—Å –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç —ç—Ç–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è" %}
            </p>
        </div>
        
        <div class="features-grid-revolutionary">
            <div class="feature-card-revolutionary animate-fade-in delay-1">
                <div class="feature-icon-revolutionary">üêç</div>
                <h3 class="feature-title-revolutionary">
                    <a href="?q=python">Python</a>
                </h3>
                <p class="feature-description-revolutionary">
                    {% trans "–°—Ç–∞—Ç—å–∏ –æ —è–∑—ã–∫–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è Python" %}
                </p>
                <div class="feature-stats-revolutionary">
                    <span class="stat">üìö 32 {% trans "—Å—Ç–∞—Ç—å–∏" %}</span>
                    <span class="stat">üî• {% trans "–ü–æ–ø—É–ª—è—Ä–Ω–æ" %}</span>
                </div>
            </div>
            
            <div class="feature-card-revolutionary animate-fade-in delay-2">
                <div class="feature-icon-revolutionary">‚öõÔ∏è</div>
                <h3 class="feature-title-revolutionary">
                    <a href="?q=react">React</a>
                </h3>
                <p class="feature-description-revolutionary">
                    {% trans "–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å React" %}
                </p>
                <div class="feature-stats-revolutionary">
                    <span class="stat">üìö 24 {% trans "—Å—Ç–∞—Ç—å–∏" %}</span>
                    <span class="stat">‚≠ê {% trans "–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º" %}</span>
                </div>
            </div>
            
            <div class="feature-card-revolutionary animate-fade-in delay-3">
                <div class="feature-icon-revolutionary">ü§ñ</div>
                <h3 class="feature-title-revolutionary">
                    <a href="?q=machine+learning">Machine Learning</a>
                </h3>
                <p class="feature-description-revolutionary">
                    {% trans "–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –∏ –Ω–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–µ—Ç–∏" %}
                </p>
                <div class="feature-stats-revolutionary">
                    <span class="stat">üìö 18 {% trans "—Å—Ç–∞—Ç–µ–π" %}</span>
                    <span class="stat">üìà {% trans "–†–∞—Å—Ç–µ—Ç" %}</span>
                </div>
            </div>
            
            <div class="feature-card-revolutionary animate-fade-in delay-4">
                <div class="feature-icon-revolutionary">üöÄ</div>
                <h3 class="feature-title-revolutionary">
                    <a href="?q=django">Django</a>
                </h3>
                <p class="feature-description-revolutionary">
                    {% trans "–í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å Django framework" %}
                </p>
                <div class="feature-stats-revolutionary">
                    <span class="stat">üìö 21 {% trans "—Å—Ç–∞—Ç—å—è" %}</span>
                    <span class="stat">üîß {% trans "–ü—Ä–∞–∫—Ç–∏—á–Ω–æ" %}</span>
                </div>
            </div>
            
            <div class="feature-card-revolutionary animate-fade-in delay-5">
                <div class="feature-icon-revolutionary">üíæ</div>
                <h3 class="feature-title-revolutionary">
                    <a href="?q=database">{% trans "–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö" %}</a>
                </h3>
                <p class="feature-description-revolutionary">
                    {% trans "PostgreSQL, MongoDB –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è" %}
                </p>
                <div class="feature-stats-revolutionary">
                    <span class="stat">üìö 15 {% trans "—Å—Ç–∞—Ç–µ–π" %}</span>
                    <span class="stat">üí° {% trans "–ü–æ–ª–µ–∑–Ω–æ" %}</span>
                </div>
            </div>
            
            <div class="feature-card-revolutionary animate-fade-in delay-6">
                <div class="feature-icon-revolutionary">üîê</div>
                <h3 class="feature-title-revolutionary">
                    <a href="?q=security">{% trans "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å" %}</a>
                </h3>
                <p class="feature-description-revolutionary">
                    {% trans "–ö–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∑–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö" %}
                </p>
                <div class="feature-stats-revolutionary">
                    <span class="stat">üìö 12 {% trans "—Å—Ç–∞—Ç–µ–π" %}</span>
                    <span class="stat">üõ°Ô∏è {% trans "–í–∞–∂–Ω–æ" %}</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta-revolutionary">
    <div class="container">
        <div class="cta-content-revolutionary">
            <h2 class="cta-title-revolutionary animate-fade-in">
                {% trans "–ù–µ –Ω–∞—à–ª–∏ —á—Ç–æ –∏—Å–∫–∞–ª–∏?" %}
            </h2>
            <p class="cta-description-revolutionary animate-fade-in delay-1">
                {% trans "–ü—Ä–µ–¥–ª–æ–∂–∏—Ç–µ —Ç–µ–º—É –¥–ª—è –Ω–æ–≤–æ–π —Å—Ç–∞—Ç—å–∏ –∏–ª–∏ –∑–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å —Å–æ–æ–±—â–µ—Å—Ç–≤—É" %}
            </p>
            <div class="cta-actions-revolutionary animate-fade-in delay-2">
                <a href="{% url 'core:contacts' %}" class="btn-revolutionary-hero btn-primary-hero">
                    <span>üí°</span>
                    <span>{% trans "–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Ç–µ–º—É" %}</span>
                </a>
                <a href="{% url 'blog:tag_list' %}" class="btn-revolutionary-hero btn-secondary-hero">
                    <span>üè∑Ô∏è</span>
                    <span>{% trans "–í—Å–µ —Ç–µ–≥–∏" %}</span>
                </a>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/courses/courses.js' %}"></script>
<script src="{% static 'js/blog/search-highlight.js' %}"></script>
{% endblock %}