{% extends 'base.html' %}
{% load static %}
{% load i18n %}
{% load markdown_filters %}

{% block title %}{{ tag.name }} - {% trans "–ë–ª–æ–≥ PyLand" %}{% endblock %}
{% block description %}{% trans "–°—Ç–∞—Ç—å–∏ —Å —Ç–µ–≥–æ–º" %} "{{ tag.name }}" {% trans "–≤ –±–ª–æ–≥–µ PyLand" %}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/courses/courses.css' %}">

<link rel="stylesheet" href="{% static 'css/blog/utils.css' %}">
{% endblock %}

{% block content %}
<!-- Revolutionary Tag Hero -->
<section class="revolutionary-hero-home">
    <div class="hero-particles">
        <div class="particle particle-1"></div>
        <div class="particle particle-2"></div>
        <div class="particle particle-3"></div>
        <div class="particle particle-4"></div>
        <div class="particle particle-5"></div>
    </div>
    
    <div class="container">
        <div class="hero-main-content">
            <div class="hero-badge-revolutionary animate-fade-in">
                <span>üè∑Ô∏è</span>
                <span>{% trans "–¢–µ–≥" %}</span>
            </div>
            
            <h1 class="hero-title-revolutionary animate-fade-in delay-1">
                #{{ tag.name }}
            </h1>
            
            <p class="hero-subtitle-revolutionary animate-fade-in delay-2">
                {% trans "–ò–∑—É—á–∞–π—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ —Ç–µ–≥—É" %} "{{ tag.name }}" {% trans "–æ—Ç —ç–∫—Å–ø–µ—Ä—Ç–æ–≤-–ø—Ä–∞–∫—Ç–∏–∫–æ–≤. –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ –∏ –ø–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è." %}
            </p>
            
            <div class="hero-actions-revolutionary animate-fade-in delay-3">
                <a href="#articles" class="btn-revolutionary-hero btn-primary-hero">
                    <span>üìñ</span>
                    <span>{% trans "–ß–∏—Ç–∞—Ç—å —Å—Ç–∞—Ç—å–∏" %}</span>
                </a>
                <a href="{% url 'blog:tag_list' %}" class="btn-revolutionary-hero btn-secondary-hero">
                    <span>üè∑Ô∏è</span>
                    <span>{% trans "–í—Å–µ —Ç–µ–≥–∏" %}</span>
                </a>
            </div>
            
            <div class="hero-stats-revolutionary animate-fade-in delay-4">
                <div class="stat-card-revolutionary">
                    <span class="stat-number-revolutionary">{{ articles.paginator.count }}</span>
                    <span class="stat-label-revolutionary">{% trans "–°—Ç–∞—Ç–µ–π" %}</span>
                </div>
                <div class="stat-card-revolutionary">
                    <span class="stat-number-revolutionary">{{ tag.taggit_taggeditem_items.count|default:"5+" }}</span>
                    <span class="stat-label-revolutionary">{% trans "–ú–∞—Ç–µ—Ä–∏–∞–ª–æ–≤" %}</span>
                </div>
                <div class="stat-card-revolutionary">
                    <span class="stat-number-revolutionary">{{ articles.paginator.count|add:"25"|default:"50+" }}</span>
                    <span class="stat-label-revolutionary">{% trans "–ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤" %}</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Articles Section -->
<section class="courses-revolutionary" id="articles">
    <div class="container">
        <div class="courses-header-revolutionary animate-fade-in">
            <h2 class="courses-title-revolutionary">
                {% trans "–°—Ç–∞—Ç—å–∏ —Å —Ç–µ–≥–æ–º" %} "#{{ tag.name }}"
            </h2>
            <p class="courses-subtitle-revolutionary">
                {% trans "–í—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ —Ç–µ–º–µ" %} {{ tag.name }}
            </p>
        </div>
        
        <div class="courses-filter-revolutionary animate-fade-in delay-1">
            <button onclick="filterArticles('new')" class="filter-btn {% if sort_by == 'new' or not request.GET.sort %}active{% endif %}" data-filter="new">
                üïí {% trans "–ù–æ–≤—ã–µ" %}
            </button>
            <button onclick="filterArticles('old')" class="filter-btn {% if sort_by == 'old' %}active{% endif %}" data-filter="old">
                üìÖ {% trans "–°—Ç–∞—Ä—ã–µ" %}
            </button>
            <button onclick="filterArticles('alpha')" class="filter-btn {% if sort_by == 'alpha' %}active{% endif %}" data-filter="alpha">
                üî§ {% trans "–ü–æ –∞–ª—Ñ–∞–≤–∏—Ç—É" %}
            </button>
            <button onclick="filterArticles('popular')" class="filter-btn {% if sort_by == 'popular' %}active{% endif %}" data-filter="popular">
                üëÅÔ∏è {% trans "–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ" %}
            </button>
        </div>
        
        <div class="courses-grid-revolutionary">
            {% for article in articles %}
            <a href="{{ article.get_absolute_url }}" class="course-card-revolutionary animate-fade-in delay-{{ forloop.counter|add:2 }}" class="link-plain">
                <div class="course-image-revolutionary">
                    {% if article.featured_image %}
                        <img src="{{ article.featured_image.url }}" alt="{{ article.title }}" class="img-cover">
                    {% else %}
                        <div class="article-placeholder">
                            {{ article.category.icon|default:"üìñ" }}
                        </div>
                    {% endif %}
                    <div class="course-badge-revolutionary">
                        {% if article.difficulty == 'beginner' %}üü¢ {% trans "–õ–µ–≥–∫–æ" %}
                        {% elif article.difficulty == 'intermediate' %}üü° {% trans "–°—Ä–µ–¥–Ω–µ" %}
                        {% elif article.difficulty == 'advanced' %}üî¥ {% trans "–°–ª–æ–∂–Ω–æ" %}
                        {% else %}üìñ {% trans "–°—Ç–∞—Ç—å—è" %}
                        {% endif %}
                    </div>
                </div>
                <div class="course-content-revolutionary">
                    <h3 class="course-title-revolutionary">{{ article.title }}</h3>
                    <p class="course-description-revolutionary">
                        {{ article.excerpt|default:article.content|smart_excerpt:20 }}
                    </p>
                    <div class="course-meta-revolutionary">
                        <div class="course-duration-revolutionary">
                            {{ article.category.icon|default:"üìÇ" }} {{ article.category.name|default:"–û–±—â–µ–µ" }}
                        </div>
                        <div class="course-lessons-revolutionary">
                            üìÖ {{ article.published_at|date:"d.m.Y" }}
                        </div>
                    </div>
                </div>
            </a>
            {% empty %}
            <div class="empty-state-revolutionary">
                <div class="empty-icon">üè∑Ô∏è</div>
                <h3>{% trans "–°—Ç–∞—Ç—å–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã" %}</h3>
                <p>{% trans "–° —ç—Ç–∏–º —Ç–µ–≥–æ–º –ø–æ–∫–∞ –Ω–µ—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π." %}</p>
                <a href="{% url 'blog:article_list' %}" class="btn-revolutionary-hero btn-primary-hero">
                    <span>üìö</span>
                    <span>{% trans "–í—Å–µ —Å—Ç–∞—Ç—å–∏" %}</span>
                </a>
            </div>
            {% endfor %}
        </div>
        
        <!-- Pagination -->
        {% if page_obj.has_other_pages %}
        <div class="pagination-revolutionary animate-fade-in delay-5">
            {% if page_obj.has_previous %}
                <a href="?page=1{% if request.GET.sort %}&sort={{ request.GET.sort }}{% endif %}" class="pagination-btn pagination-first">
                    <span>‚èÆÔ∏è</span>
                </a>
                <a href="?page={{ page_obj.previous_page_number }}{% if request.GET.sort %}&sort={{ request.GET.sort }}{% endif %}" class="pagination-btn pagination-prev">
                    <span>‚óÄÔ∏è</span>
                </a>
            {% endif %}
            
            <span class="pagination-info">
                {% trans "–°—Ç—Ä–∞–Ω–∏—Ü–∞" %} {{ page_obj.number }} {% trans "–∏–∑" %} {{ page_obj.paginator.num_pages }}
            </span>
            
            {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}{% if request.GET.sort %}&sort={{ request.GET.sort }}{% endif %}" class="pagination-btn pagination-next">
                    <span>‚ñ∂Ô∏è</span>
                </a>
                <a href="?page={{ page_obj.paginator.num_pages }}{% if request.GET.sort %}&sort={{ request.GET.sort }}{% endif %}" class="pagination-btn pagination-last">
                    <span>‚è≠Ô∏è</span>
                </a>
            {% endif %}
        </div>
        {% endif %}
    </div>
</section>

<!-- Related Tags -->
<section class="features-revolutionary">
    <div class="container">
        <div class="features-header-revolutionary animate-fade-in">
            <h2 class="features-title-revolutionary">
                {% trans "–ü–æ—Ö–æ–∂–∏–µ —Ç–µ–≥–∏" %}
            </h2>
            <p class="features-subtitle-revolutionary">
                {% trans "–ò–∑—É—á–∞–π—Ç–µ —Å–º–µ–∂–Ω—ã–µ —Ç–µ–º—ã" %}
            </p>
        </div>
        
        <div class="features-grid-revolutionary">
            {% for related_tag in related_tags %}
            <div class="feature-card-revolutionary animate-fade-in delay-{{ forloop.counter }}">
                <div class="feature-icon-revolutionary">üè∑Ô∏è</div>
                <h3 class="feature-title-revolutionary">
                    <a href="{% url 'blog:tag_detail' related_tag.slug %}">#{{ related_tag.name }}</a>
                </h3>
                <p class="feature-description-revolutionary">
                    {% trans "–°—Ç–∞—Ç—å–∏ –ø–æ —Ç–µ–º–µ" %} {{ related_tag.name }}
                </p>
                <div class="feature-stats-revolutionary">
                    <span class="stat">üìö {{ related_tag.article_count }} {% if related_tag.article_count == 1 %}{% trans "—Å—Ç–∞—Ç—å—è" %}{% elif related_tag.article_count < 5 %}{% trans "—Å—Ç–∞—Ç—å–∏" %}{% else %}{% trans "—Å—Ç–∞—Ç–µ–π" %}{% endif %}</span>
                </div>
            </div>
            {% empty %}
            <div class="feature-card-revolutionary animate-fade-in delay-1">
                <div class="feature-icon-revolutionary">üè∑Ô∏è</div>
                <h3 class="feature-title-revolutionary">
                    {% trans "–ü–æ—Ö–æ–∂–∏—Ö —Ç–µ–≥–æ–≤ –Ω–µ—Ç" %}
                </h3>
                <p class="feature-description-revolutionary">
                    {% trans "–ò–∑—É—á–∞–π—Ç–µ –¥—Ä—É–≥–∏–µ —Ç–µ–º—ã –≤ –Ω–∞—à–µ–º –±–ª–æ–≥–µ" %}
                </p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta-revolutionary">
    <div class="container">
        <div class="cta-content-revolutionary">
            <h2 class="cta-title-revolutionary animate-fade-in">
                {% trans "–ò—â–µ—Ç–µ –±–æ–ª—å—à–µ –ø–æ —Ç–µ–º–µ?" %}
            </h2>
            <p class="cta-description-revolutionary animate-fade-in delay-1">
                {% trans "–ò–∑—É—á–∏—Ç–µ –≤—Å–µ –Ω–∞—à–∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏–ª–∏ –ø–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è" %}
            </p>
            <div class="cta-actions-revolutionary animate-fade-in delay-2">
                <a href="{% url 'blog:article_list' %}" class="btn-revolutionary-hero btn-primary-hero">
                    <span>üîç</span>
                    <span>{% trans "–ù–∞–π—Ç–∏ –±–æ–ª—å—à–µ" %}</span>
                </a>
                <a href="{% url 'core:contacts' %}" class="btn-revolutionary-hero btn-secondary-hero">
                    <span>üìß</span>
                    <span>{% trans "–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è" %}</span>
                </a>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/courses/courses.js' %}"></script>
<script src="{% static 'js/blog/tag-filter.js' %}"></script>
{% endblock %}