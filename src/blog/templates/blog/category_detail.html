{% extends 'base.html' %}
{% load static %}
{% load i18n %}
{% load markdown_filters %}

{% block title %}{{ category.name }} - {% trans "–ë–ª–æ–≥ PyLand" %}{% endblock %}
{% block description %}{{ category.description|default:"–°—Ç–∞—Ç—å–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "|add:category.name|add:" –≤ –±–ª–æ–≥–µ PyLand" }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/courses/courses.css' %}">

<link rel="stylesheet" href="{% static 'css/blog/utils.css' %}">
{% endblock %}

{% block content %}
<!-- Revolutionary Category Hero -->
<section class="revolutionary-hero-home">
    <div class="hero-particles">
        <div class="particle particle-1"></div>
        <div class="particle particle-2"></div>
        <div class="particle particle-3"></div>
        <div class="particle particle-4"></div>
        <div class="particle particle-5"></div>
    </div>
    
    <div class="container">
        <div class="hero-main-content">
            <div class="hero-badge-revolutionary animate-fade-in">
                <span>{{ category.icon|default:"üìÇ" }}</span>
                <span>{% trans "–ö–∞—Ç–µ–≥–æ—Ä–∏—è" %}</span>
            </div>
            
            <h1 class="hero-title-revolutionary animate-fade-in delay-1">
                {{ category.name }}
            </h1>
            
            <p class="hero-subtitle-revolutionary animate-fade-in delay-2">
                {% if category.description %}{{ category.description }}{% else %}{% trans "–ò–∑—É—á–∞–π—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" %} "{{ category.name }}" {% trans "–æ—Ç –æ–ø—ã—Ç–Ω—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã, –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥–∏–∫–∏ –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞." %}{% endif %}
            </p>
            
            <div class="hero-actions-revolutionary animate-fade-in delay-3">
                <a href="#articles" class="btn-revolutionary-hero btn-primary-hero">
                    <span>ÔøΩ</span>
                    <span>{% trans "–ß–∏—Ç–∞—Ç—å —Å—Ç–∞—Ç—å–∏" %}</span>
                </a>
                <a href="{% url 'blog:category_list' %}" class="btn-revolutionary-hero btn-secondary-hero">
                    <span>üìÇ</span>
                    <span>{% trans "–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" %}</span>
                </a>
            </div>
            
            <div class="hero-stats-revolutionary animate-fade-in delay-4">
                <div class="stat-card-revolutionary">
                    <span class="stat-number-revolutionary">{{ articles.paginator.count }}</span>
                    <span class="stat-label-revolutionary">{% trans "–°—Ç–∞—Ç–µ–π" %}</span>
                </div>
                <div class="stat-card-revolutionary">
                    <span class="stat-number-revolutionary">{{ category.articles.count|default:"10+" }}</span>
                    <span class="stat-label-revolutionary">{% trans "–ú–∞—Ç–µ—Ä–∏–∞–ª–æ–≤" %}</span>
                </div>
                <div class="stat-card-revolutionary">
                    <span class="stat-number-revolutionary">{{ articles.paginator.count|add:"100"|default:"200+" }}</span>
                    <span class="stat-label-revolutionary">{% trans "–ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤" %}</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Articles Section -->
<section class="courses-revolutionary" id="articles">
    <div class="container">
        <div class="courses-header-revolutionary animate-fade-in">
            <h2 class="courses-title-revolutionary">
                {% trans "–°—Ç–∞—Ç—å–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" %} "{{ category.name }}"
            </h2>
            <p class="courses-subtitle-revolutionary">
                {% trans "–ò–∑—É—á–∏—Ç–µ –≤—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ –¥–∞–Ω–Ω–æ–π —Ç–µ–º–µ" %}
            </p>
        </div>
        
        <div class="courses-filter-revolutionary animate-fade-in delay-1">
            <a href="?sort=-published_at" class="filter-btn {% if request.GET.sort == '-published_at' or not request.GET.sort %}active{% endif %}">
                üïí {% trans "–ù–æ–≤—ã–µ" %}
            </a>
            <a href="?sort=published_at" class="filter-btn {% if request.GET.sort == 'published_at' %}active{% endif %}">
                üìÖ {% trans "–°—Ç–∞—Ä—ã–µ" %}
            </a>
            <a href="?sort=title" class="filter-btn {% if request.GET.sort == 'title' %}active{% endif %}">
                üî§ {% trans "–ü–æ –∞–ª—Ñ–∞–≤–∏—Ç—É" %}
            </a>
            <a href="?sort=-views_count" class="filter-btn {% if request.GET.sort == '-views_count' %}active{% endif %}">
                üëÅÔ∏è {% trans "–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ" %}
            </a>
        </div>
        
        <div class="courses-grid-revolutionary">
            {% for article in articles %}
            <a href="{{ article.get_absolute_url }}" class="course-card-revolutionary animate-fade-in delay-{{ forloop.counter|add:2 }}" class="link-plain">
                <div class="course-image-revolutionary">
                    {% if article.featured_image %}
                        <img src="{{ article.featured_image.url }}" alt="{{ article.title }}" class="img-cover">
                    {% else %}
                        <div class="article-placeholder">
                            {{ category.icon|default:"üìñ" }}
                        </div>
                    {% endif %}
                    <div class="course-badge-revolutionary">
                        {% if article.difficulty == 'beginner' %}üü¢ {% trans "–õ–µ–≥–∫–æ" %}
                        {% elif article.difficulty == 'intermediate' %}üü° {% trans "–°—Ä–µ–¥–Ω–µ" %}
                        {% elif article.difficulty == 'advanced' %}üî¥ {% trans "–°–ª–æ–∂–Ω–æ" %}
                        {% else %}üìñ {% trans "–°—Ç–∞—Ç—å—è" %}
                        {% endif %}
                    </div>
                </div>
                <div class="course-content-revolutionary">
                    <h3 class="course-title-revolutionary">{{ article.title }}</h3>
                    <p class="course-description-revolutionary">
                        {{ article.excerpt|default:article.content|smart_excerpt:20 }}
                    </p>
                    <div class="course-meta-revolutionary">
                        <div class="course-duration-revolutionary">
                            üìÖ {{ article.published_at|date:"d.m.Y" }}
                        </div>
                        <div class="course-lessons-revolutionary">
                            üë§ {{ article.author.username }}
                        </div>
                    </div>
                </div>
            </a>
            {% empty %}
            <div class="empty-state-revolutionary">
                <div class="empty-icon">üìù</div>
                <h3>{% trans "–°—Ç–∞—Ç—å–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã" %}</h3>
                <p>{% trans "–í —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–∫–∞ –Ω–µ—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π." %}</p>
                <a href="{% url 'blog:article_list' %}" class="btn-revolutionary-hero btn-primary-hero">
                    <span>üìö</span>
                    <span>{% trans "–í—Å–µ —Å—Ç–∞—Ç—å–∏" %}</span>
                </a>
            </div>
            {% endfor %}
        </div>
        
        <!-- Pagination -->
        {% if page_obj.has_other_pages %}
        <div class="pagination-revolutionary animate-fade-in delay-5">
            {% if page_obj.has_previous %}
                <a href="?page=1{% if request.GET.sort %}&sort={{ request.GET.sort }}{% endif %}" class="pagination-btn pagination-first">
                    <span>‚èÆÔ∏è</span>
                </a>
                <a href="?page={{ page_obj.previous_page_number }}{% if request.GET.sort %}&sort={{ request.GET.sort }}{% endif %}" class="pagination-btn pagination-prev">
                    <span>‚óÄÔ∏è</span>
                </a>
            {% endif %}
            
            <span class="pagination-info">
                {% trans "–°—Ç—Ä–∞–Ω–∏—Ü–∞" %} {{ page_obj.number }} {% trans "–∏–∑" %} {{ page_obj.paginator.num_pages }}
            </span>
            
            {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}{% if request.GET.sort %}&sort={{ request.GET.sort }}{% endif %}" class="pagination-btn pagination-next">
                    <span>‚ñ∂Ô∏è</span>
                </a>
                <a href="?page={{ page_obj.paginator.num_pages }}{% if request.GET.sort %}&sort={{ request.GET.sort }}{% endif %}" class="pagination-btn pagination-last">
                    <span>‚è≠Ô∏è</span>
                </a>
            {% endif %}
        </div>
        {% endif %}
    </div>
</section>

<!-- Related Categories -->
<section class="features-revolutionary">
    <div class="container">
        <div class="features-header-revolutionary animate-fade-in">
            <h2 class="features-title-revolutionary">
                {% trans "–î—Ä—É–≥–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" %}
            </h2>
            <p class="features-subtitle-revolutionary">
                {% trans "–ò–∑—É—á–∞–π—Ç–µ —Å–º–µ–∂–Ω—ã–µ —Ç–µ–º—ã" %}
            </p>
        </div>
        
        <div class="features-grid-revolutionary">
            {% if other_categories %}
                {% for other_category in other_categories %}
                <div class="feature-card-revolutionary animate-fade-in delay-{{ forloop.counter }}">
                    <div class="feature-icon-revolutionary">{{ other_category.icon|default:"ÔøΩ" }}</div>
                    <h3 class="feature-title-revolutionary">
                        <a href="{% url 'blog:category_detail' other_category.slug %}">{{ other_category.name }}</a>
                    </h3>
                    <p class="feature-description-revolutionary">
                        {{ other_category.description|default:"–ò–∑—É—á–∞–π—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "|add:other_category.name|truncatewords:12 }}
                    </p>
                    <div class="feature-stats-revolutionary">
                        <span class="stat">üìö {{ other_category.published_count }} {% trans "—Å—Ç–∞—Ç–µ–π" %}</span>
                        <span class="stat">‚≠ê 4.{{ forloop.counter|add:6 }}</span>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <!-- Fallback –µ—Å–ª–∏ –Ω–µ—Ç –¥—Ä—É–≥–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
                <div class="feature-card-revolutionary animate-fade-in delay-1">
                    <div class="feature-icon-revolutionary">üìÇ</div>
                    <h3 class="feature-title-revolutionary">
                        <a href="{% url 'blog:category_list' %}">{% trans "–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" %}</a>
                    </h3>
                    <p class="feature-description-revolutionary">
                        {% trans "–ò–∑—É—á–∞–π—Ç–µ –¥—Ä—É–≥–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ç–µ–º—ã –≤ –Ω–∞—à–µ–º –±–ª–æ–≥–µ" %}
                    </p>
                    <div class="feature-stats-revolutionary">
                        <span class="stat">üìö {% trans "–ú–Ω–æ–≥–æ —Å—Ç–∞—Ç–µ–π" %}</span>
                        <span class="stat">‚≠ê 4.8</span>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta-revolutionary">
    <div class="container">
        <div class="cta-content-revolutionary">
            <h2 class="cta-title-revolutionary animate-fade-in">
                {% trans "–•–æ—Ç–∏—Ç–µ –±–æ–ª—å—à–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤?" %}
            </h2>
            <p class="cta-description-revolutionary animate-fade-in delay-1">
                {% trans "–ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —É–∑–Ω–∞–≤–∞–π—Ç–µ –æ –Ω–æ–≤—ã—Ö —Å—Ç–∞—Ç—å—è—Ö –ø–µ—Ä–≤—ã–º–∏!" %}
            </p>
            <div class="cta-actions-revolutionary animate-fade-in delay-2">
                <a href="{% url 'core:contacts' %}" class="btn-revolutionary-hero btn-primary-hero">
                    <span>üìß</span>
                    <span>{% trans "–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è" %}</span>
                </a>
                <a href="{% url 'blog:article_list' %}" class="btn-revolutionary-hero btn-secondary-hero">
                    <span>üìö</span>
                    <span>{% trans "–í—Å–µ —Å—Ç–∞—Ç—å–∏" %}</span>
                </a>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/courses/courses.js' %}"></script>
{% endblock %}