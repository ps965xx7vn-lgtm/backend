# Management Commands

Django management commands –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–∞—á authentication app.

## üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

1. **create_roles** - –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. **create_test_users** - –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---

## create_roles

–°–æ–∑–¥–∞–µ—Ç 6 –±–∞–∑–æ–≤—ã—Ö —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Å–∏—Å—Ç–µ–º–µ.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
cd src
poetry run python manage.py create_roles
```text
### –ß—Ç–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è

| –†–æ–ª—å | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|----------|
| `student` | –°—Ç—É–¥–µ–Ω—Ç | –û–±—É—á–∞–µ—Ç—Å—è –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ, –ø—Ä–æ—Ö–æ–¥–∏—Ç –∫—É—Ä—Å—ã |
| `mentor` | –ú–µ–Ω—Ç–æ—Ä | –ü–æ–º–æ–≥–∞–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞–º, –ø—Ä–æ–≤–æ–¥–∏—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ |
| `reviewer` | –†–µ–≤—å—é–µ—Ä | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ |
| `manager` | –ú–µ–Ω–µ–¥–∂–µ—Ä | –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π –∏ –∫—É—Ä—Å–∞–º–∏ |
| `admin` | –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä | –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º |
| `support` | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ | –ü–æ–º–æ–≥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Ä–µ—à–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã |

### –í—ã–≤–æ–¥

```text
‚úì –°–æ–∑–¥–∞–Ω–∞ —Ä–æ–ª—å: student (–°—Ç—É–¥–µ–Ω—Ç)
‚úì –°–æ–∑–¥–∞–Ω–∞ —Ä–æ–ª—å: mentor (–ú–µ–Ω—Ç–æ—Ä)
‚úì –°–æ–∑–¥–∞–Ω–∞ —Ä–æ–ª—å: reviewer (–†–µ–≤—å—é–µ—Ä)
‚úì –°–æ–∑–¥–∞–Ω–∞ —Ä–æ–ª—å: manager (–ú–µ–Ω–µ–¥–∂–µ—Ä)
‚úì –°–æ–∑–¥–∞–Ω–∞ —Ä–æ–ª—å: admin (–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä)
‚úì –°–æ–∑–¥–∞–Ω–∞ —Ä–æ–ª—å: support (–ü–æ–¥–¥–µ—Ä–∂–∫–∞)

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚úì –ö–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!
  –°–æ–∑–¥–∞–Ω–æ —Ä–æ–ª–µ–π: 6
  –£–∂–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–æ: 0
  –í—Å–µ–≥–æ —Ä–æ–ª–µ–π: 6
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
```text
### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞** - –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ
- **–ê—Ç–æ–º–∞—Ä–Ω–∞** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç transaction –¥–ª—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
- **–ë–µ–∑–æ–ø–∞—Å–Ω–∞** - –Ω–µ —É–¥–∞–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ä–æ–ª–∏
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–∞** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- ‚úÖ –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –¥–µ–ø–ª–æ–µ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ï—Å–ª–∏ —Ä–æ–ª–∏ –±—ã–ª–∏ —Å–ª—É—á–∞–π–Ω–æ —É–¥–∞–ª–µ–Ω—ã
- ‚úÖ –í CI/CD pipeline –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π

### –ü—Ä–∏–º–µ—Ä –≤ –∫–æ–¥–µ

```python
from django.core.management import call_command

# –í—ã–∑–≤–∞—Ç—å –∏–∑ Python –∫–æ–¥–∞

call_command('create_roles')
```text
---

## create_test_users

–°–æ–∑–¥–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash

# –ë–∞–∑–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç (6 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π - –ø–æ –æ–¥–Ω–æ–º—É –∫–∞–∂–¥–æ–π —Ä–æ–ª–∏)

poetry run python manage.py create_test_users

# –° –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏

poetry run python manage.py create_test_users --count 10

# –£–¥–∞–ª–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏ —Å–æ–∑–¥–∞—Ç—å –∑–∞–Ω–æ–≤–æ

poetry run python manage.py create_test_users --clear
```text
### –û–ø—Ü–∏–∏

| –û–ø—Ü–∏—è | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| `--count` | int | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 0) |
| `--clear` | flag | –£–¥–∞–ª–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º |

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

#### –ë–∞–∑–æ–≤—ã–µ (–≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞—é—Ç—Å—è)

| Email | Password | –†–æ–ª—å | Staff | Superuser |
|-------|----------|------|-------|-----------|
| student@test.com | password123 | student | ‚ùå | ‚ùå |
| mentor@test.com | password123 | mentor | ‚ùå | ‚ùå |
| reviewer@test.com | password123 | reviewer | ‚ùå | ‚ùå |
| manager@test.com | password123 | manager | ‚úÖ | ‚ùå |
| admin@test.com | password123 | admin | ‚úÖ | ‚úÖ |
| support@test.com | password123 | support | ‚ùå | ‚ùå |

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç—É–¥–µ–Ω—Ç—ã (—Å --count)

- `student1@test.com` / `password123`
- `student2@test.com` / `password123`
- `student3@test.com` / `password123`
- ...

### –í—ã–≤–æ–¥

```bash
$ poetry run python manage.py create_test_users --count 5

‚úì –°–æ–∑–¥–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: student@test.com (—Ä–æ–ª—å: student)
‚úì –°–æ–∑–¥–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: mentor@test.com (—Ä–æ–ª—å: mentor)
‚úì –°–æ–∑–¥–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: reviewer@test.com (—Ä–æ–ª—å: reviewer)
‚úì –°–æ–∑–¥–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: manager@test.com (—Ä–æ–ª—å: manager)
‚úì –°–æ–∑–¥–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: admin@test.com (—Ä–æ–ª—å: admin)
‚úì –°–æ–∑–¥–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: support@test.com (—Ä–æ–ª—å: support)
‚úì –°–æ–∑–¥–∞–Ω —Å—Ç—É–¥–µ–Ω—Ç: student1@test.com
‚úì –°–æ–∑–¥–∞–Ω —Å—Ç—É–¥–µ–Ω—Ç: student2@test.com
‚úì –°–æ–∑–¥–∞–Ω —Å—Ç—É–¥–µ–Ω—Ç: student3@test.com
‚úì –°–æ–∑–¥–∞–Ω —Å—Ç—É–¥–µ–Ω—Ç: student4@test.com
‚úì –°–æ–∑–¥–∞–Ω —Å—Ç—É–¥–µ–Ω—Ç: student5@test.com

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚úì –ö–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!
  –°–æ–∑–¥–∞–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 11

Credentials –¥–ª—è –≤—Ö–æ–¥–∞:
  Email: [role]@test.com
  Password: password123
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
```text
### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Ä–æ–ª–µ–π** - —Ç—Ä–µ–±—É–µ—Ç –∑–∞–ø—É—Å–∫–∞ `create_roles` —Å–Ω–∞—á–∞–ª–∞
- **–ë–µ–∑–æ–ø–∞—Å–Ω–∞** - –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ê—Ç–æ–º–∞—Ä–Ω–∞** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç transaction
- **–ì–∏–±–∫–∞—è** - –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
- **Email verified** - –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å—Ä–∞–∑—É –∞–∫—Ç–∏–≤–Ω—ã

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UI
- ‚úÖ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –±–∞–∑—ã
- ‚ùå **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ production!**

### –ü—Ä–∏–º–µ—Ä workflow

```bash

# 1. –°–æ–∑–¥–∞—Ç—å —Ä–æ–ª–∏

poetry run python manage.py create_roles

# 2. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

poetry run python manage.py create_test_users --count 20

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä

poetry run python manage.py runserver

# 4. –í–æ–π—Ç–∏ –∫–∞–∫ admin

# Email: admin@test.com

# Password: password123

```text
### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–ê–ñ–ù–û:**

- –ö–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å **–ø—Ä–æ—Å—Ç—ã–º–∏ –ø–∞—Ä–æ–ª—è–º–∏**
- **–ù–ï –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –Ω–∞ production**
- Email –∞–¥—Ä–µ—Å–∞ –ª–µ–≥–∫–æ —É–≥–∞–¥—ã–≤–∞—é—Ç—Å—è
- –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω –ø–∞—Ä–æ–ª—å

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –£–¥–∞–ª–∏—Ç–µ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º: `--clear` + –Ω–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –∫–æ–º–∞–Ω–¥—É
- –í production —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ admin –∏–ª–∏ API

---

## –°–æ–∑–¥–∞–Ω–∏–µ —Å–≤–æ–µ–π –∫–æ–º–∞–Ω–¥—ã

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```python

# authentication/management/commands/my_command.py

from django.core.management.base import BaseCommand

class Command(BaseCommand):
    """–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã."""

    help = '–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã'

    def add_arguments(self, parser):
        """–î–æ–±–∞–≤–∏—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏."""
        parser.add_argument(
            '--option',
            type=str,
            help='–û–ø–∏—Å–∞–Ω–∏–µ –æ–ø—Ü–∏–∏',
        )

    def handle(self, *args, **options):
        """–û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∫–æ–º–∞–Ω–¥—ã."""
        self.stdout.write(
            self.style.SUCCESS('–ö–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!')
        )
```text
### –í—ã–∑–æ–≤

```bash
poetry run python manage.py my_command --option value
```text
### Best Practices

1. **Docstrings** - –≤—Å–µ–≥–¥–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã
2. **help** - –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è `--help`
3. **–ê—Ä–≥—É–º–µ–Ω—Ç—ã** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `add_arguments()` –¥–ª—è –æ–ø—Ü–∏–π
4. **–í—ã–≤–æ–¥** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `self.stdout` –∏ `self.style`
5. **–û—à–∏–±–∫–∏** - –≤—ã–±—Ä–∞—Å—ã–≤–∞–π—Ç–µ `CommandError` –¥–ª—è –æ—à–∏–±–æ–∫
6. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `transaction.atomic()` –¥–ª—è DB –æ–ø–µ—Ä–∞—Ü–∏–π
7. **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –∫–æ–º–∞–Ω–¥–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–∞ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥

```python
from django.core.management import call_command
from django.test import TestCase
from io import StringIO

class TestCreateRolesCommand(TestCase):
    def test_create_roles(self):
        """–¢–µ—Å—Ç –∫–æ–º–∞–Ω–¥—ã create_roles."""
        out = StringIO()
        call_command('create_roles', stdout=out)

        self.assertIn('–°–æ–∑–¥–∞–Ω–æ —Ä–æ–ª–µ–π: 6', out.getvalue())

        # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ä–æ–ª–∏ —Å–æ–∑–¥–∞–Ω—ã

        from authentication.models import Role
        self.assertEqual(Role.objects.count(), 6)
```text
---

## Troubleshooting

### –ö–æ–º–∞–Ω–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

```bash

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É

ls authentication/management/commands/

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å

# __init__.py

# create_roles.py

# create_test_users.py

```text
### Import –æ—à–∏–±–∫–∏

```python

# –í commands/__init__.py –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å

"""Management commands for authentication app."""

# –ù–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã –Ω–∞–ø—Ä—è–º—É—é –≤ __init__.py

```text
### –†–æ–ª–∏ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è

```bash

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏

poetry run python manage.py showmigrations authentication

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

poetry run python manage.py migrate authentication
```text
### Permission denied

```bash

# –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Ñ–∞–π–ª—ã –∫–æ–º–∞–Ω–¥ executable (–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è Python)

chmod +x authentication/management/commands/*.py
```text
---

## CI/CD Integration

### GitHub Actions

```yaml
name: Setup Test Data

jobs:
  setup:
    runs-on: ubuntu-latest
    steps:

      - uses: actions/checkout@v2
      - name: Setup roles

        run: |
          cd src
          poetry run python manage.py create_roles

      - name: Setup test users

        run: |
          cd src
          poetry run python manage.py create_test_users --count 10
```text
### Docker

```dockerfile

# Dockerfile

RUN poetry run python manage.py create_roles

# docker-compose.yml

services:
  web:
    command: >
      sh -c "poetry run python manage.py create_roles &&
             poetry run python manage.py runserver 0.0.0.0:8000"
```text
---

## –°—Ç–∞—Ç—É—Å

‚úÖ **Production Ready**

- –ö–æ–º–∞–Ω–¥—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è
- Best practices —Å–æ–±–ª—é–¥–µ–Ω—ã
- Error handling —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞
