{% extends 'base.html' %}
{% load static %}
{% load i18n %}
{% load markdownify %}
{% load markdown_filters %}

{% block title %}{{ course.name }} - PyLand{% endblock %}
{% block description %}{{ course.short_description|default:course.description|truncatewords:20 }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/courses/courses.css' %}">
<link rel="stylesheet" href="{% static 'css/courses/markdown.css' %}">
<link rel="stylesheet" href="{% static 'css/core/code-blocks.css' %}">
{% endblock %}

{% block content %}
    <!-- Hero Section (–∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–ª–∞—Å—Å—ã –∏–∑ home.html) -->
    <section class="revolutionary-hero-home">
        <div class="hero-particles">
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
        </div>
        
        <div class="container">
            <div class="hero-main-content">
                <div class="hero-badge-revolutionary animate-fade-in">
                    <span>üéØ</span>
                    <span>{% trans "–ü–æ–ø—É–ª—è—Ä–Ω—ã–π –∫—É—Ä—Å" %}</span>
                </div>
                
                <h1 class="hero-title-revolutionary animate-fade-in delay-1">{{ course.name }}</h1>
                
                <p class="hero-subtitle-revolutionary animate-fade-in delay-2">
                    {{ course.short_description|default:course.description|truncatewords:25 }}
                </p>
                
                <div class="hero-actions-revolutionary animate-fade-in delay-3">
                    {% if has_access %}
                        <a href="#curriculum" class="btn-revolutionary-hero btn-primary-hero">
                            <span>üöÄ</span>
                            <span>{% trans "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ–±—É—á–µ–Ω–∏–µ" %}</span>
                        </a>
                    {% else %}
                        <a href="{% url 'authentication:signup' %}" class="btn-revolutionary-hero btn-primary-hero">
                            <span>üéØ</span>
                            <span>{% trans "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫—É—Ä—Å" %}</span>
                        </a>
                    {% endif %}
                    <a href="#curriculum" class="btn-revolutionary-hero btn-secondary-hero">
                        <span>üìã</span>
                        <span>{% trans "–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É" %}</span>
                    </a>
                </div>
                
                <div class="hero-stats-revolutionary animate-fade-in delay-4">
                    <div class="stat-card-revolutionary">
                        <span class="stat-number-revolutionary">{{ course.rating|floatformat:1 }}‚≠ê</span>
                        <span class="stat-label-revolutionary">{% trans "–†–µ–π—Ç–∏–Ω–≥" %}</span>
                    </div>
                    <div class="stat-card-revolutionary">
                        <span class="stat-number-revolutionary">{{ lessons.count }}</span>
                        <span class="stat-label-revolutionary">{% if lessons.count == 1 %}{% trans "–£—Ä–æ–∫" %}{% elif lessons.count < 5 %}{% trans "–£—Ä–æ–∫–∞" %}{% else %}{% trans "–£—Ä–æ–∫–æ–≤" %}{% endif %}</span>
                    </div>
                    <div class="stat-card-revolutionary">
                        <span class="stat-number-revolutionary">{{ total_steps|default:"0" }}</span>
                        <span class="stat-label-revolutionary">{% if total_steps == 1 %}{% trans "–ó–∞–¥–∞–Ω–∏–µ" %}{% elif total_steps < 5 %}{% trans "–ó–∞–¥–∞–Ω–∏—è" %}{% else %}{% trans "–ó–∞–¥–∞–Ω–∏–π" %}{% endif %}</span>
                    </div>
                    <div class="stat-card-revolutionary">
                        <span class="stat-number-revolutionary">{% if estimated_hours > 0 %}~{{ estimated_hours }} {% trans "—á" %}{% else %}{% trans "–°–∫–æ—Ä–æ" %}{% endif %}</span>
                        <span class="stat-label-revolutionary">{% trans "–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å" %}</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Course Content (–∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–ª–∞—Å—Å—ã –∏–∑ features-revolutionary) -->
    <section class="features-revolutionary" id="curriculum">
        <div class="container">
            <div class="section-header-revolutionary">
                <div class="section-badge animate-fade-in">
                    <span>üìö</span>
                    <span>{% trans "–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∫—É—Ä—Å–∞" %}</span>
                </div>
                <h2 class="section-title-revolutionary animate-fade-in delay-1">
                    {% trans "–ß—Ç–æ –≤—ã –∏–∑—É—á–∏—Ç–µ" %}
                </h2>
                <p class="section-subtitle-revolutionary animate-fade-in delay-2">
                    {% trans "–ü–æ–¥—Ä–æ–±–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∫—É—Ä—Å–∞ —Å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–º–∏ –∑–∞–¥–∞–Ω–∏—è–º–∏ –∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏" %}
                </p>
            </div>
            
            <!-- –¢–∞–±—ã -->
            <div class="course-tabs-container">
                <button class="tab-btn active" data-tab="overview">{% trans "–û–±–∑–æ—Ä" %}</button>
                <button class="tab-btn" data-tab="curriculum">{% trans "–ü—Ä–æ–≥—Ä–∞–º–º–∞" %}</button>
                <button class="tab-btn" data-tab="reviews">{% trans "–û—Ç–∑—ã–≤—ã" %}</button>
            </div>
            
            <div class="features-grid-revolutionary">
                <!-- Overview Tab -->
                <div class="tab-content active" id="overview">
                    <div class="feature-card-revolutionary course-overview-card">
                        <div class="feature-icon-revolutionary">üìñ</div>
                        <h3 class="feature-title-revolutionary">{% trans "–û –∫—É—Ä—Å–µ" %}</h3>
                        <div class="article-text-revolutionary course-description-content">
                            {{ course.description|markdownify|default:"–≠—Ç–æ—Ç –∫—É—Ä—Å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è. –í—ã –ø–æ–ª—É—á–∏—Ç–µ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏ –∏ –∑–Ω–∞–Ω–∏—è, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è —É—Å–ø–µ—à–Ω–æ–π –∫–∞—Ä—å–µ—Ä—ã –≤ IT." }}
                        </div>
                        
                        <h4 class="course-learning-title">{% trans "–ß—Ç–æ –≤—ã –∏–∑—É—á–∏—Ç–µ:" %}</h4>
                        <ul class="course-learning-list">
                            <li class="course-learning-item">
                                <span class="course-learning-icon">‚úì</span>
                                {% trans "–û—Å–Ω–æ–≤—ã –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∞–ª–≥–æ—Ä–∏—Ç–º—ã" %}
                            </li>
                            <li class="course-learning-item">
                                <span class="course-learning-icon">‚úì</span>
                                {% trans "–†–∞–±–æ—Ç–∞ —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö" %}
                            </li>
                            <li class="course-learning-item">
                                <span class="course-learning-icon">‚úì</span>
                                {% trans "–°–æ–∑–¥–∞–Ω–∏–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π" %}
                            </li>
                            <li class="course-learning-item">
                                <span class="course-learning-icon">‚úì</span>
                                {% trans "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞ –∫–æ–¥–∞" %}
                            </li>
                            <li class="course-learning-item">
                                <span class="course-learning-icon">‚úì</span>
                                {% trans "–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π" %}
                            </li>
                        </ul>
                    </div>
                </div>
                
                <!-- Curriculum Tab -->
                <div class="tab-content" id="curriculum-content">
                    {% for lesson in lessons %}
                    <div class="feature-card-revolutionary animate-fade-in delay-{{ forloop.counter }}">
                        <div class="feature-icon-revolutionary">üìù</div>
                        <h3 class="feature-title-revolutionary">{{ lesson.name }}</h3>
                        <p class="feature-description-revolutionary">
                            {{ lesson.description|default:"–ü–æ–¥—Ä–æ–±–Ω–æ–µ –∏–∑—É—á–µ–Ω–∏–µ —Ç–µ–º—ã —Å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–º–∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏ –∑–∞–¥–∞–Ω–∏—è–º–∏."|truncatewords:15 }}
                        </p>
                        <div class="lesson-meta">
                            <span>‚è±Ô∏è {% trans "45 –º–∏–Ω" %}</span>
                            <span>üìö {{ lesson.steps.count|default:"5" }} {% trans "–∑–∞–¥–∞–Ω–∏–π" %}</span>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                
                <!-- Reviews Tab -->
                <div class="tab-content" id="reviews-content">
                    <div class="feature-card-revolutionary reviews-empty-card">
                        <div class="feature-icon-revolutionary">‚≠ê</div>
                        <h3 class="feature-title-revolutionary">{% trans "–û—Ç–∑—ã–≤—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤" %}</h3>
                        <p class="feature-description-revolutionary reviews-empty-text">
                            {% trans "–û—Ç–∑—ã–≤–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç. –û–Ω–∏ –ø–æ—è–≤—è—Ç—Å—è, –∫–æ–≥–¥–∞ —Å—Ç—É–¥–µ–Ω—Ç—ã –Ω–∞—á–Ω—É—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∫—É—Ä—Å –∏ –¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–∏–º –æ–ø—ã—Ç–æ–º –æ–±—É—á–µ–Ω–∏—è." %}
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Code Examples Section -->
    <section class="code-examples-section">
        <div class="container">
            <div class="code-section-header">
                <div class="code-section-badge">
                    <span>üíª</span>
                    <span>{% trans "–ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –∏–∑ –∫—É—Ä—Å–∞" %}</span>
                </div>
                <h2 class="code-section-title">
                    {% trans "–ò–∑—É—á–∞–π—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö" %}
                </h2>
                <p class="code-section-subtitle">
                    {% trans "–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, –∫–∞–∫–æ–π –∫–æ–¥ –≤—ã –±—É–¥–µ—Ç–µ –ø–∏—Å–∞—Ç—å –≤ —Ä–∞–º–∫–∞—Ö –∫—É—Ä—Å–∞" %}
                </p>
            </div>
            
            <div class="code-examples-grid">
                <!-- Python Example -->
                <div class="code-block">
                    <div class="code-block-header">
                        <div class="code-window-controls">
                            <div class="code-window-btn close"></div>
                            <div class="code-window-btn minimize"></div>
                            <div class="code-window-btn maximize"></div>
                        </div>
                        <div class="code-filename">lesson_example.py</div>
                    </div>
                    <div class="code-block-content">
                        <div class="code-line"><span class="code-comment"># –°–æ–∑–¥–∞–µ–º –∫–ª–∞—Å—Å –¥–ª—è –∫—É—Ä—Å–∞</span></div>
                        <div class="code-line"><span class="code-keyword">class</span> <span class="code-function">Course</span>:</div>
                        <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">def</span> <span class="code-function">__init__</span>(<span class="code-special">self</span>, <span class="code-param">title</span>, <span class="code-param">duration</span>):</div>
                        <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-special">self</span>.title = <span class="code-param">title</span></div>
                        <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-special">self</span>.duration = <span class="code-param">duration</span></div>
                        <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-special">self</span>.students = []</div>
                        <div class="code-line"></div>
                        <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">def</span> <span class="code-function">enroll_student</span>(<span class="code-special">self</span>, <span class="code-param">student</span>):</div>
                        <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-special">self</span>.students.<span class="code-function">append</span>(<span class="code-param">student</span>)</div>
                        <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> <span class="code-string">f"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <span class="code-special">{student}</span>!"</span><span class="code-cursor"></span></div>
                    </div>
                </div>

                <!-- JavaScript Example -->
                <div class="code-block">
                    <div class="code-block-header">
                        <div class="code-window-controls">
                            <div class="code-window-btn close"></div>
                            <div class="code-window-btn minimize"></div>
                            <div class="code-window-btn maximize"></div>
                        </div>
                        <div class="code-filename">interactive_app.js</div>
                    </div>
                    <div class="code-block-content">
                        <div class="code-line"><span class="code-comment">// –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ</span></div>
                        <div class="code-line"><span class="code-keyword">const</span> <span class="code-variable">learningApp</span> = {</div>
                        <div class="code-line">&nbsp;&nbsp;courses: [],</div>
                        <div class="code-line">&nbsp;&nbsp;students: <span class="code-number">5000</span>,</div>
                        <div class="code-line"></div>
                        <div class="code-line">&nbsp;&nbsp;<span class="code-function">addCourse</span>(<span class="code-param">course</span>) {</div>
                        <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-special">this</span>.courses.<span class="code-function">push</span>(<span class="code-param">course</span>);</div>
                        <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-variable">console</span>.<span class="code-function">log</span>(<span class="code-string">`–ö—É—Ä—Å <span class="code-special">${course}</span> –¥–æ–±–∞–≤–ª–µ–Ω!`</span>);</div>
                        <div class="code-line">&nbsp;&nbsp;}</div>
                        <div class="code-line">};<span class="code-cursor"></span></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section (–∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–∑ home.html) -->
    <section class="cta-revolutionary">
        <div class="container">
            <div class="cta-content-revolutionary">
                <h2 class="cta-title-revolutionary animate-fade-in">
                    {% trans "–ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å –∏–∑—É—á–µ–Ω–∏–µ?" %}
                </h2>
                <p class="cta-description-revolutionary animate-fade-in delay-1">
                    {% trans "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ —Ç—ã—Å—è—á–∞–º —Å—Ç—É–¥–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –∏–∑–º–µ–Ω–∏–ª–∏ —Å–≤–æ—é –∂–∏–∑–Ω—å –±–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ç–æ–º—É –∫—É—Ä—Å—É. –ü–æ–ª—É—á–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏." %}
                </p>
                <div class="cta-actions-revolutionary animate-fade-in delay-2">
                    {% if has_access %}
                        <a href="#curriculum" class="btn-revolutionary-hero btn-primary-hero">
                            <span>üöÄ</span>
                            <span>{% trans "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ–±—É—á–µ–Ω–∏–µ" %}</span>
                        </a>
                    {% else %}
                        <a href="{% url 'authentication:signup' %}" class="btn-revolutionary-hero btn-primary-hero">
                            <span>üéØ</span>
                            <span>{% trans "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ" %}</span>
                        </a>
                    {% endif %}
                    <a href="{% url 'courses:courses' %}" class="btn-revolutionary-hero btn-secondary-hero">
                        <span>üìö</span>
                        <span>{% trans "–î—Ä—É–≥–∏–µ –∫—É—Ä—Å—ã" %}</span>
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Recommendations -->
    {% if courses %}
    <section class="features-revolutionary">
        <div class="container">
            <div class="section-header-revolutionary">
                <div class="section-badge animate-fade-in">
                    <span>üî•</span>
                    <span>{% trans "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏" %}</span>
                </div>
                <h2 class="section-title-revolutionary animate-fade-in delay-1">
                    {% trans "–î—Ä—É–≥–∏–µ –∫—É—Ä—Å—ã" %}
                </h2>
                <p class="section-subtitle-revolutionary animate-fade-in delay-2">
                    {% trans "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ —Å–≤–æ–µ –æ–±—É—á–µ–Ω–∏–µ —Å —ç—Ç–∏–º–∏ –∫—É—Ä—Å–∞–º–∏" %}
                </p>
            </div>
            
            <div class="features-grid-revolutionary">
                {% for other_course in courses %}
                <a href="{{ other_course.get_absolute_url }}" class="feature-card-revolutionary animate-fade-in delay-{{ forloop.counter|add:2 }}" style="text-decoration: none; color: inherit;">
                    <div class="feature-icon-revolutionary">
                        {% if other_course.image %}
                            <img src="{{ other_course.image.url }}" alt="{{ other_course.name }}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 16px;">
                        {% else %}
                            üéØ
                        {% endif %}
                    </div>
                    <h3 class="feature-title-revolutionary">{{ other_course.name }}</h3>
                    <p class="feature-description-revolutionary">
                        {{ other_course.short_description|default:other_course.description|truncatewords:15 }}
                    </p>
                </a>
                {% endfor %}
            </div>
        </div>
    </section>
    {% endif %}
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/courses/course-detail.js' %}"></script>
{% endblock %}