# Courses Application

Приложение управления курсами платформы Pyland School.

## Описание

Courses отвечает за всю структуру обучающего контента: курсы, уроки, шаги, задания, отправку работ и отслеживание прогресса студентов.

## Структура данных

### Иерархия
```
Course (Курс)
  └── Lesson (Урок)
       └── Step (Шаг)
            ├── Tip (Подсказка)
            └── ExtraSource (Доп. материал)
       └── LessonSubmission (Отправленная работа)
  └── StepProgress (Прогресс по шагам)
```

## Модели

### Course
Основная модель курса с информацией:
- Название, описание, изображение
- Цена (0 = бесплатно)
- Статусы: `draft`, `active`, `archived`
- Slug для SEO-friendly URL
- Связь со студентами (M2M через enrollment)

### Lesson
Урок внутри курса:
- Порядковый номер
- Название и описание
- Связь с курсом (ForeignKey)
- Slug для URL

### Step
Шаг (элемент контента) урока:
- Порядковый номер
- Тип контента: `text`, `video`, `code`, `quiz`
- Контент (текст/ссылка)
- Обязательность выполнения

### LessonSubmission
Отправленная работа студента:
- Ссылка на GitHub репозиторий
- Статусы: `pending`, `changes_requested`, `approved`
- Связь со студентом, уроком, ревьюером
- Дата отправки и проверки

### StepProgress
Прогресс студента по шагам:
- Флаг завершения (completed)
- Время начала и завершения
- Связь со студентом и шагом

### Tip
Подсказка к шагу для помощи студентам

### ExtraSource
Дополнительный материал для углубленного изучения

## API Endpoints

### Курсы
```
GET    /api/courses/              - Список всех курсов
GET    /api/courses/{id}          - Детали курса
POST   /api/courses/              - Создание курса (admin)
```

### Уроки
```
GET    /api/courses/{id}/lessons  - Уроки курса
POST   /api/courses/lessons/      - Создание урока (admin)
GET    /api/courses/lessons/{id}  - Детали урока
```

### Шаги
```
POST   /api/courses/steps/        - Создание шага (admin)
GET    /api/courses/steps/{id}    - Детали шага
```

### Работы студентов
```
GET    /api/courses/submissions/              - Список работ
POST   /api/courses/submissions/{id}/resubmit - Повторная отправка
POST   /api/courses/submissions/{id}/review   - Проверка работы (reviewer)
```

## Views

### Публичные
- `course_list_view` - Каталог всех курсов
- `course_detail_view` - Детальная страница курса с программой

### Для студентов
Находятся в `students/views.py`:
- Просмотр своих курсов
- Прохождение уроков
- Отправка работ на проверку
- Просмотр замечаний от ревьюеров

## Особенности

### Кеширование
- Прогресс студентов кешируется в Redis
- Автоматическая инвалидация при изменениях
- Использует `students/cache_utils.py`

### Валидация
- GitHub URL в submissions (должен вести на репозиторий)
- Уникальность slug для курсов и уроков
- Автоматическая генерация slug из названия

### Безопасность
- Студенты видят только свои работы
- Ревьюеры видят только назначенные им работы
- Изменение контента только для admin

## Admin панель

Полнофункциональный admin с:
- Inline редактированием уроков в курсе
- Inline редактированием шагов в уроке
- Фильтрами по статусу, дате, автору
- Счетчиками (кол-во уроков, шагов, студентов)
- Bulk actions для массовых операций

## Связанные приложения

- **students** - прохождение курсов, отправка работ
- **reviewers** - проверка работ студентов
- **certificates** - генерация сертификатов при завершении
- **payments** - покупка платных курсов

## Тестирование

Запуск тестов:
```bash
pytest courses/tests/ -v
```

## Миграции

Применение миграций:
```bash
python manage.py migrate courses
```

## Авторы

Pyland Team, 2025
