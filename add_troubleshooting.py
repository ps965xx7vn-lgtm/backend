#!/usr/bin/env python
"""–°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è troubleshooting_help –≤–æ –≤—Å–µ —à–∞–≥–∏ –∫—É—Ä—Å–∞"""

import json
import os

# –ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø—Ä–æ–±–ª–µ–º
troubleshooting_hints = {
    "github_registration": """**‚ùå –ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:**

- **–ü–∏—Å—å–º–æ –Ω–µ –ø—Ä–∏—à–ª–æ?**
  - –ü—Ä–æ–≤–µ—Ä—å –ø–∞–ø–∫—É "–°–ø–∞–º" –≤ –ø–æ—á—Ç–µ
  - –ü–æ–ø—Ä–æ–±—É–π –¥—Ä—É–≥–æ–π email (Gmail, Mail.ru)
  - –ü–æ–¥–æ–∂–¥–∏ 5 –º–∏–Ω—É—Ç - –∏–Ω–æ–≥–¥–∞ –ø–∏—Å—å–º–∞ –∏–¥—É—Ç –¥–æ–ª–≥–æ

- **Username –∑–∞–Ω—è—Ç?**
  - –î–æ–±–∞–≤—å —Ü–∏—Ñ—Ä—ã: `alex-dev-2024`
  - –î–æ–±–∞–≤—å —Å–≤–æ—é —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é: `alex-frontend`
  - –ò—Å–ø–æ–ª—å–∑—É–π –¥–µ—Ñ–∏—Å –≤–º–µ—Å—Ç–æ –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏—è

- **–ü–∞—Ä–æ–ª—å –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç?**
  - –ú–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤
  - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –±—É–∫–≤—ã –ò —Ü–∏—Ñ—Ä—ã
  - –ü—Ä–∏–º–µ—Ä: `MyPass2024`""",
    "git_config": """**‚ùå –ö–æ–º–∞–Ω–¥—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:**

- **"git: command not found"**
  - –°–∫–∞—á–∞–π Git: https://git-scm.com/downloads
  - –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª
  - –ü—Ä–æ–≤–µ—Ä—å: `git --version`

- **–ö–∞–≤—ã—á–∫–∏ –Ω–µ —Ç–µ**
  - –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä—è–º—ã–µ –∫–∞–≤—ã—á–∫–∏: `"—Ç–µ–∫—Å—Ç"`
  - –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π ¬´ ¬ª –∏–ª–∏ " "

- **–ò–º—è —Å –ø—Ä–æ–±–µ–ª–∞–º–∏**
  - –û–±–µ—Ä–Ω–∏ –≤ –∫–∞–≤—ã—á–∫–∏: `"–ê–ª–µ–∫—Å –ü–µ—Ç—Ä–æ–≤"`""",
    "repository": """**‚ùå –ù–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**

- **–ò–º—è –∑–∞–Ω—è—Ç–æ?**
  - –î–æ–±–∞–≤—å —Ü–∏—Ñ—Ä—É: `my-portfolio-2024`
  - –ò—Å–ø–æ–ª—å–∑—É–π –¥–µ—Ñ–∏—Å: `my-first-portfolio`

- **–ö–Ω–æ–ø–∫–∞ New –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞?**
  - –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ç—ã –∑–∞–ª–æ–≥–∏–Ω–µ–Ω (–∏–∫–æ–Ω–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è —Å–ø—Ä–∞–≤–∞ –≤–≤–µ—Ä—Ö—É)
  - –ü–æ–ø—Ä–æ–±—É–π: https://github.com/new

- **–ù–µ –º–æ–∂–µ—à—å –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å email?**
  - Settings ‚Üí Emails ‚Üí Resend verification""",
    "git_clone": """**‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º:**

- **"Permission denied"**
  - –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Public
  - –ò—Å–ø–æ–ª—å–∑—É–π HTTPS —Å—Å—ã–ª–∫—É (–Ω–µ SSH)

- **–ü–∞–ø–∫–∞ –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è**
  - –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ç—ã –≤ –Ω—É–∂–Ω–æ–π –ø–∞–ø–∫–µ: `pwd`
  - –°–æ–∑–¥–∞–π –ø–∞–ø–∫—É –≤—Ä—É—á–Ω—É—é: `mkdir ~/projects`

- **"Already exists"**
  - –£–¥–∞–ª–∏ —Å—Ç–∞—Ä—É—é –ø–∞–ø–∫—É: `rm -rf my-portfolio`
  - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π –¥—Ä—É–≥–æ–µ –∏–º—è""",
    "html_file": """**‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å HTML:**

- **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è**
  - –ü—Ä–æ–≤–µ—Ä—å –∏–º—è —Ñ–∞–π–ª–∞: —Ç–æ—á–Ω–æ `index.html`?
  - –§–∞–π–ª –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–∞–ø–∫–µ?
  - –ü–æ–ø—Ä–æ–±—É–π –æ—Ç–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä: File ‚Üí Open

- **–ù–∏—á–µ–≥–æ –Ω–µ –≤–∏–¥–Ω–æ**
  - –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ñ–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—ë–Ω (Ctrl+S)
  - –û–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+R –∏–ª–∏ F5)

- **–ö—Ä–∏–≤–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞ (–∫—Ä–∞–∫–æ–∑—è–±—Ä—ã)**
  - –ü—Ä–æ–≤–µ—Ä—å `<meta charset="UTF-8">` –≤ –∫–æ–¥–µ""",
    "git_commit": """**‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–º–º–∏—Ç–æ–º:**

- **"nothing to commit"**
  - –°–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤—å —Ñ–∞–π–ª—ã: `git add .`
  - –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å: `git status`

- **"Please tell me who you are"**
  - –ù–∞—Å—Ç—Ä–æ–π –∏–º—è: `git config --global user.name "–¢–≤–æ—ë –∏–º—è"`
  - –ù–∞—Å—Ç—Ä–æ–π email: `git config --global user.email "email@example.com"`

- **–û—Ç–∫—Ä—ã–ª—Å—è VIM —Ä–µ–¥–∞–∫—Ç–æ—Ä?**
  - –ù–∞–∂–º–∏ `Esc`
  - –ù–∞–±–µ—Ä–∏ `:q!`
  - –ù–∞–∂–º–∏ Enter""",
    "github_pages": """**‚ùå –°–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è:**

- **404 Not Found**
  - –ü–æ–¥–æ–∂–¥–∏ 2-3 –º–∏–Ω—É—Ç—ã –ø–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
  - –û—á–∏—Å—Ç–∏ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞: Ctrl+Shift+R
  - –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Public

- **–°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è —Å–∞–π—Ç–∞**
  - –û—á–∏—Å—Ç–∏ –∫—ç—à: Ctrl+Shift+R
  - –û—Ç–∫—Ä–æ–π –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ
  - –ü–æ–¥–æ–∂–¥–∏ 1-2 –º–∏–Ω—É—Ç—ã

- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è**
  - –£–±–µ–¥–∏—Å—å —á—Ç–æ —É —Ç–µ–±—è –µ—Å—Ç—å index.html
  - –§–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (–Ω–µ –≤ –ø–∞–ø–∫–µ)""",
    "general": """**‚ùå –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è:**

- **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª**
  - –ó–∞–∫—Ä–æ–π –∏ –æ—Ç–∫—Ä–æ–π –∑–∞–Ω–æ–≤–æ
  - –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

- **–û—á–∏—Å—Ç–∏ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞**
  - –ù–∞–∂–º–∏ Ctrl+Shift+R (Windows/Linux)
  - Cmd+Shift+R (Mac)

- **–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –ø–æ –ø–æ—Ä—è–¥–∫—É**
  - –í–µ—Ä–Ω–∏—Å—å –Ω–∞ —à–∞–≥ –Ω–∞–∑–∞–¥
  - –í—ã–ø–æ–ª–Ω–∏ –≤—Å—ë –∑–∞–Ω–æ–≤–æ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ""",
}

# –ú–∞–ø–ø–∏–Ω–≥ —à–∞–≥–æ–≤ –∫ —Ç–∏–ø–∞–º –ø–æ–¥—Å–∫–∞–∑–æ–∫
step_hints_map = {
    "–ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å –≥–µ—Ä–æ–µ–º": "general",
    "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Git": "github_registration",
    "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Git": "git_config",
    "–°–æ–∑–¥–∞—ë–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π": "repository",
    "–°–∫–∞—á–∏–≤–∞–µ–º –ø—Ä–æ–µ–∫—Ç –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä": "git_clone",
    "–°–æ–∑–¥–∞—ë–º HTML —Å—Ç—Ä–∞–Ω–∏—Ü—É": "html_file",
    "–ü–µ—Ä–≤—ã–π –∫–æ–º–º–∏—Ç": "git_commit",
    "–î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏": "html_file",
    "–ö–æ–º–º–∏—Ç —Å—Ç–∏–ª–µ–π": "git_commit",
    "–î–æ–±–∞–≤–ª—è–µ–º –∞–≤–∞—Ç–∞—Ä": "html_file",
    "–ö–æ–º–º–∏—Ç –∞–≤–∞—Ç–∞—Ä–∞": "git_commit",
    "–î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ–±–µ": "html_file",
    "–ö–æ–º–º–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏": "git_commit",
    "–î–æ–±–∞–≤–ª—è–µ–º –Ω–∞–≤—ã–∫–∏": "html_file",
    "–ö–æ–º–º–∏—Ç –Ω–∞–≤—ã–∫–æ–≤": "git_commit",
    "–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤—Å–µ –∫–æ–º–º–∏—Ç—ã –Ω–∞ GitHub": "git_commit",
    "–ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Å—Ç–æ—Ä–∏—é –Ω–∞ GitHub": "general",
    "–ü—É–±–ª–∏–∫—É–µ–º —Å–∞–π—Ç - –¥–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç–∞–∫—Ç—ã": "github_pages",
    "–ò—Ç–æ–≥–∏ —É—Ä–æ–∫–∞ 1 - –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É": "general",
}


def add_troubleshooting_to_course():
    file_path = "docs/examples/git_github_course_practical.json"

    print(f"üìÇ –ó–∞–≥—Ä—É–∂–∞—é: {file_path}")
    with open(file_path, encoding="utf-8") as f:
        course = json.load(f)

    added_count = 0

    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ä—É—Å—Å–∫—É—é –≤–µ—Ä—Å–∏—é
    if "ru" in course and "lessons" in course["ru"]:
        for lesson in course["ru"]["lessons"]:
            for step in lesson["steps"]:
                step_name = step.get("name", "")

                # –ò—â–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –¥–ª—è —ç—Ç–æ–≥–æ —à–∞–≥–∞
                hint_type = "general"
                for key_phrase in step_hints_map:
                    if key_phrase.lower() in step_name.lower():
                        hint_type = step_hints_map[key_phrase]
                        break

                # –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –µ—Å–ª–∏ –µ—ë –µ—â—ë –Ω–µ—Ç
                if "troubleshooting_help" not in step or not step["troubleshooting_help"]:
                    step["troubleshooting_help"] = troubleshooting_hints[hint_type]
                    added_count += 1
                    print(f"   ‚úÖ {step_name}: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥—Å–∫–∞–∑–∫–∞ —Ç–∏–ø–∞ '{hint_type}'")

    print("\nüíæ –°–æ—Ö—Ä–∞–Ω—è—é –∏–∑–º–µ–Ω–µ–Ω–∏—è...")
    with open(file_path, "w", encoding="utf-8") as f:
        json.dump(course, f, ensure_ascii=False, indent=2)

    print("\n‚úÖ –ì–æ—Ç–æ–≤–æ!")
    print(f"   –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Å–∫–∞–∑–æ–∫: {added_count}")
    return added_count


if __name__ == "__main__":
    os.chdir(os.path.dirname(os.path.abspath(__file__)))
    add_troubleshooting_to_course()
